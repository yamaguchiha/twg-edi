-----------------------------------------------------------------------------
-- USERS  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE USERS CASCADE;


CREATE TABLE USERS
(
    OID int8 NOT NULL,
    USER_ID varchar (32) NOT NULL,
    PASSWORD varchar(256) NOT NULL,
    NAME varchar (128),
    ROLE_TYPE varchar (1) NOT NULL,
    DEFAULT_PLACE_OID int8 NOT NULL,
    ENABLED_PLACE_OID_VALUES varchar(1024) NOT NULL,
    LOADING_OID int8,
    DISCHARGE_OID int8,
    PRIMARY KEY (OID)
);

ALTER TABLE IF EXISTS public.users
    OWNER to ediuser;

COMMENT ON TABLE USERS IS 'ユーザー';
COMMENT ON COLUMN USERS.OID IS 'OID';
COMMENT ON COLUMN USERS.USER_ID IS 'ユーザーID';
COMMENT ON COLUMN USERS.PASSWORD IS 'パスワード';
COMMENT ON COLUMN USERS.NAME IS 'ユーザー名';
COMMENT ON COLUMN USERS.ROLE_TYPE IS 'ロール区分';
COMMENT ON COLUMN USERS.DEFAULT_PLACE_OID IS 'デフォルト事業所OID';
COMMENT ON COLUMN USERS.ENABLED_PLACE_OID_VALUES IS '利用可能事業所';
COMMENT ON COLUMN USERS.LOADING_OID IS '出荷場所OID';
COMMENT ON COLUMN USERS.DISCHARGE_OID IS '納入場所OID';


-----------------------------------------------------------------------------
-- numbering
-----------------------------------------------------------------------------
--DROP TABLE numbering CASCADE;


CREATE TABLE numbering
(
    id varchar (128) NOT NULL,
    next_number int8 NOT NULL,
    PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.numbering
    OWNER to ediuser;

COMMENT ON TABLE numbering IS 'ナンバリングテーブル';
COMMENT ON COLUMN numbering.id IS 'ＩＤ';
COMMENT ON COLUMN numbering.next_number IS '現在割り当てている番号';


-----------------------------------------------------------------------------
-- PARTY  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE PARTY CASCADE;


CREATE TABLE PARTY
(
    OID int8 NOT NULL,
    TDB_PARTY_CODE varchar (1024) NOT NULL,
    NAME varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_PARTY_1 UNIQUE (TDB_PARTY_CODE)
);

COMMENT ON TABLE PARTY IS '企業情報';
COMMENT ON COLUMN PARTY.OID IS 'OID';
COMMENT ON COLUMN PARTY.TDB_PARTY_CODE IS '帝国データバンク企業コード';
COMMENT ON COLUMN PARTY.NAME IS '名称';

ALTER TABLE IF EXISTS public.party
    OWNER to ediuser;

-----------------------------------------------------------------------------
-- PARTY_SETTING  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE PARTY_SETTING CASCADE;


CREATE TABLE PARTY_SETTING
(
    OID int8 NOT NULL,
    PARTY_OID int8 NOT NULL,
    OWN_PLACE_OID int8 NOT NULL,
    ABBR_CODE varchar (128),
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_PARTY_SETTING_ABBR_CODE ON PARTY_SETTING (ABBR_CODE);

COMMENT ON TABLE PARTY_SETTING IS '企業設定情報';
COMMENT ON COLUMN PARTY_SETTING.OID IS 'OID';
COMMENT ON COLUMN PARTY_SETTING.PARTY_OID IS '企業情報OID';
COMMENT ON COLUMN PLACE_SETTING.OWN_PLACE_OID IS '自事業所OID';
COMMENT ON COLUMN PARTY_SETTING.ABBR_CODE IS '社内用企業コード';

ALTER TABLE IF EXISTS public.party_setting
    OWNER to ediuser;

--ALTER TABLE PARTY_SETTING DROP CONSTRAINT fk_PARTY_SETTING__1;
--ALTER TABLE PARTY_SETTING DROP CONSTRAINT fk_PARTY_SETTING__2;

ALTER TABLE PARTY_SETTING
    ADD CONSTRAINT fk_PARTY_SETTING__1 FOREIGN KEY (
      PARTY_OID
    )
    REFERENCES PARTY (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;

ALTER TABLE PLACE_SETTING
    ADD CONSTRAINT fk_PARTY_SETTING__2 FOREIGN KEY (
      OWN_PLACE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;

-----------------------------------------------------------------------------
-- PLACE  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE PLACE CASCADE;


CREATE TABLE PLACE
(
    OID int8 NOT NULL,
    PARTY_OID int8 NOT NULL,
    TDB_PLACE_CODE varchar (1024) NOT NULL,
    NAME varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_PLACE_1 UNIQUE (PARTY_OID, TDB_PLACE_CODE)
);
CREATE INDEX IDXF_PLACE_PARTY_OID ON PLACE (PARTY_OID);

COMMENT ON TABLE PLACE IS '事業所情報';
COMMENT ON COLUMN PLACE.OID IS 'OID';
COMMENT ON COLUMN PLACE.PARTY_OID IS '企業情報OID';
COMMENT ON COLUMN PLACE.TDB_PLACE_CODE IS '帝国データバンク事業所コード';
COMMENT ON COLUMN PLACE.NAME IS '名称';


ALTER TABLE IF EXISTS public.place
    OWNER to ediuser;

--ALTER TABLE PLACE DROP CONSTRAINT fk_PLACE__1;

ALTER TABLE PLACE
    ADD CONSTRAINT fk_PLACE__1 FOREIGN KEY (
      PARTY_OID
    )
    REFERENCES PARTY (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;

-----------------------------------------------------------------------------
-- PLACE_SETTING  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE PLACE_SETTING CASCADE;


CREATE TABLE PLACE_SETTING
(
    OID int8 NOT NULL,
    PLACE_OID int8 NOT NULL,
    OWN_PLACE_OID int8 NOT NULL,
    DOC_REF_ID_P02 varchar (70),
    ITEM_P07 varchar (256),
    ITEM_BEF_PATTERN varchar (256),
    BEFORE_PROCESS_FLAG char default 'Y' NOT NULL,
    BEFORE_PROCESS_START_STRING_DATE varchar (8) NOT NULL,
    BEFORE_PROCESS_END_STRING_DATE varchar (8) NOT NULL,
    PRIMARY KEY (OID),
    CONSTRAINT unq_PLACE_SETTING_1 UNIQUE (PLACE_OID, OWN_PLACE_OID)
);

COMMENT ON TABLE PLACE_SETTING IS '事業所設定情報';
COMMENT ON COLUMN PLACE_SETTING.OID IS 'OID';
COMMENT ON COLUMN PLACE_SETTING.PLACE_OID IS '事業所OID';
COMMENT ON COLUMN PLACE_SETTING.OWN_PLACE_OID IS '自事業所OID';
COMMENT ON COLUMN PLACE_SETTING.DOC_REF_ID_P02 IS 'かんばん発行有無';
COMMENT ON COLUMN PLACE_SETTING.ITEM_P07 IS '帳票発行指示区分';
COMMENT ON COLUMN PLACE_SETTING.ITEM_BEF_PATTERN IS '前工程発行パターン';
COMMENT ON COLUMN PLACE_SETTING.BEFORE_PROCESS_FLAG IS '前工程フラグ';
COMMENT ON COLUMN PLACE_SETTING.BEFORE_PROCESS_START_STRING_DATE IS '前工程発行開始日 固定長日付';
COMMENT ON COLUMN PLACE_SETTING.BEFORE_PROCESS_END_STRING_DATE IS '前工程発行終了日 固定長日付';

ALTER TABLE IF EXISTS public.party_setting
    OWNER to ediuser;

--ALTER TABLE PLACE_SETTING DROP CONSTRAINT fk_PLACE_SETTING__1;
--ALTER TABLE PLACE_SETTING DROP CONSTRAINT fk_PLACE_SETTING__2;

ALTER TABLE PLACE_SETTING
    ADD CONSTRAINT fk_PLACE_SETTING__1 FOREIGN KEY (
      PLACE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE PLACE_SETTING
    ADD CONSTRAINT fk_PLACE_SETTING__2 FOREIGN KEY (
      OWN_PLACE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


----------------------------------------------------------------------------
-- JOB_SCHEDULER
-----------------------------------------------------------------------------
--DROP TABLE JOB_SCHEDULER CASCADE;


CREATE TABLE JOB_SCHEDULER
(
    ID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    JOB_CATEGORY varchar (32) NOT NULL,
    SCHEDULE varchar (128) NOT NULL,
    COMMENT varchar (128),
    PARAMETER varchar (128),
    VALID char default 'N' NOT NULL,
        TS_REGISTERER_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    PRIMARY KEY (ID)
);
CREATE INDEX IDX_JOB_SCHEDULER_JOB_CATEGORY ON JOB_SCHEDULER (OWN_PARTY_ID, OWN_PLACE_ID, JOB_CATEGORY, SCHEDULE);
CREATE INDEX IDX_OWN_JOB_SCHEDULER ON JOB_SCHEDULER (OWN_PARTY_ID, OWN_PLACE_ID);

COMMENT ON TABLE JOB_SCHEDULER IS 'ジョブスケジュール管理';
COMMENT ON COLUMN JOB_SCHEDULER.ID IS 'OID';
COMMENT ON COLUMN JOB_SCHEDULER.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN JOB_SCHEDULER.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN JOB_SCHEDULER.JOB_CATEGORY IS 'ジョブ種別';
COMMENT ON COLUMN JOB_SCHEDULER.SCHEDULE IS 'スケジュール';
COMMENT ON COLUMN JOB_SCHEDULER.COMMENT IS 'コメント';
COMMENT ON COLUMN JOB_SCHEDULER.PARAMETER IS 'パラメータ';
COMMENT ON COLUMN JOB_SCHEDULER.VALID IS '有効';
COMMENT ON COLUMN JOB_SCHEDULER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN JOB_SCHEDULER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';

ALTER TABLE IF EXISTS public.JOB_SCHEDULER
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- SYSTEM_CONFIG  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE SYSTEM_CONFIG CASCADE;


CREATE TABLE SYSTEM_CONFIG
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    CATEGORY varchar (50) NOT NULL,
    PARAMETER varchar (255),
    MEMO varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_SYSTEM_CONFIG_1 UNIQUE (OWN_PARTY_ID, OWN_PLACE_ID, CATEGORY)
);
CREATE INDEX IDXF_SYSTEM_CONFIG_PLACE_OID ON SYSTEM_CONFIG (OWN_PARTY_ID, OWN_PLACE_ID);

COMMENT ON TABLE SYSTEM_CONFIG IS 'システムパラメータ要素';
COMMENT ON COLUMN SYSTEM_CONFIG.OID IS 'OID';
COMMENT ON COLUMN SYSTEM_CONFIG.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN SYSTEM_CONFIG.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN SYSTEM_CONFIG.CATEGORY IS 'カテゴリー';
COMMENT ON COLUMN SYSTEM_CONFIG.PARAMETER IS 'パラメータ';
COMMENT ON COLUMN SYSTEM_CONFIG.MEMO IS '備考';

ALTER TABLE IF EXISTS public.SYSTEM_CONFIG
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- OPTION_SYSTEM_CONFIG
-----------------------------------------------------------------------------
--DROP TABLE OPTION_SYSTEM_CONFIG CASCADE;


CREATE TABLE OPTION_SYSTEM_CONFIG
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    CATEGORY varchar (50) NOT NULL,
    PARAMETER varchar (255),
    MEMO varchar (128),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_SYSTEM_CONFIG_1 UNIQUE (OWN_PARTY_ID, OWN_PLACE_ID, CATEGORY)
);
CREATE INDEX IDXF_OPTION_SYSTEM_CONFIG_PLACE_OID ON OPTION_SYSTEM_CONFIG (OWN_PARTY_ID, OWN_PLACE_ID);

COMMENT ON TABLE OPTION_SYSTEM_CONFIG IS 'システムパラメータ要素';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.OID IS 'OID';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.CATEGORY IS 'カテゴリー';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.PARAMETER IS 'パラメータ';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.MEMO IS '備考';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_SYSTEM_CONFIG.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_SYSTEM_CONFIG
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- ITEM  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE ITEM CASCADE;


CREATE TABLE ITEM
(
    OID int8 NOT NULL,
    CHANGED char default 'Y' NOT NULL,
    RELATED char default 'N' NOT NULL,
    RELATED_DATE timestamp,
    ITEM_ID_IN varchar (256) NOT NULL,
    ITEM_ID_PD varchar (256) NOT NULL,
    ITEM_8 varchar (256),
    ITEM_E18 varchar (256),
    IDENTICAL_ITEM_ID int8,
    VALID_START_STRING_DATE varchar (8) NOT NULL,
    VALID_END_STRING_DATE varchar (8) NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_BY_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_SE_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_OB_OID int8,
      -- REFERENCES PLACE (OID)
    PLACE_SF_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
    PLACE_OF_LOADING_ID varchar (35),
    PLACE_OF_LOADING_NAME varchar (35),
    PLACE_OF_DISCHARGE_ID varchar (35),
    ITEM_E04 varchar (256),
    PER_PACKAGE_QUANTITY int8,
    MANUFACTURING_DEPARTMENT_ID varchar (35),
    PACKAGE_TYPE_DESCRIPTION_CODE varchar (256),
    QUANTITY_UNIT_CODE varchar (3),
    BUYABLE char default 'Y' NOT NULL,
    SUPPLY_TYPE char default 'Y' NOT NULL,
    ITEM_TYPE varchar (1) NOT NULL,
    THROUGH_TYPE varchar (1) NOT NULL,
    MATERIALS_TYPE varchar (1) default '0' NOT NULL,
    SEPARATE_SUPPLY_TYPE varchar (1) default '0' NOT NULL,
    ITEM_M03 varchar (256),
    ITEM_ID_CL varchar (256),
    ITEM_M01_DESC varchar (256),
    ITEM_P04_DETAIL varchar (256),
    ITEM_P05_A1_L01 varchar (514),
    ITEM_P05_A1_L02 varchar (514),
    ITEM_P05_A1_L03 varchar (514),
    ITEM_P05_A1_L04 varchar (514),
    ITEM_P05_A1_L05 varchar (514),
    ITEM_P05_A1_L06 varchar (514),
    ITEM_P05_A1_L07 varchar (514),
    ITEM_P05_A1_L08 varchar (514),
    ITEM_P05_A1_L09 varchar (514),
    ITEM_P05_A1_L10 varchar (514),
    ITEM_P05_A1_L11 varchar (514),
    ITEM_P05_A1_L12 varchar (514),
    ITEM_P05_A1_L13 varchar (514),
    ITEM_P05_A1_L14 varchar (514),
    ITEM_P05_A1_L15 varchar (514),
    ITEM_P05_A1_L16 varchar (514),
    ITEM_P05_A1_L17 varchar (514),
    ITEM_P05_A1_L18 varchar (514),
    ITEM_P05_A1_L19 varchar (514),
    ITEM_P05_A1_L20 varchar (514),
    ITEM_P05_A2_L01 varchar (514),
    ITEM_P05_A2_L02 varchar (514),
    ITEM_P05_A2_L03 varchar (514),
    ITEM_P05_A2_L04 varchar (514),
    ITEM_P05_A2_L05 varchar (514),
    ITEM_P05_A2_L06 varchar (514),
    ITEM_P05_A2_L07 varchar (514),
    ITEM_P05_A2_L08 varchar (514),
    ITEM_P05_A2_L09 varchar (514),
    ITEM_P05_A2_L10 varchar (514),
    ITEM_P05_A2_L11 varchar (514),
    ITEM_P05_A2_L12 varchar (514),
    ITEM_P05_A2_L13 varchar (514),
    ITEM_P05_A2_L14 varchar (514),
    ITEM_P05_A2_L15 varchar (514),
    ITEM_P05_A2_L16 varchar (514),
    ITEM_P05_A2_L17 varchar (514),
    ITEM_P05_A2_L18 varchar (514),
    ITEM_P05_A2_L19 varchar (514),
    ITEM_P05_A2_L20 varchar (514),
    ITEM_P05_A3_L01 varchar (514),
    ITEM_P05_A3_L02 varchar (514),
    ITEM_P05_A3_L03 varchar (514),
    ITEM_P05_A3_L04 varchar (514),
    ITEM_P05_A3_L05 varchar (514),
    ITEM_P05_A3_L06 varchar (514),
    ITEM_P05_A3_L07 varchar (514),
    ITEM_P05_A3_L08 varchar (514),
    ITEM_P05_A3_L09 varchar (514),
    ITEM_P05_A3_L10 varchar (514),
    ITEM_P05_A3_L11 varchar (514),
    ITEM_P05_A3_L12 varchar (514),
    ITEM_P05_A3_L13 varchar (514),
    ITEM_P05_A3_L14 varchar (514),
    ITEM_P05_A3_L15 varchar (514),
    ITEM_P05_A3_L16 varchar (514),
    ITEM_P05_A3_L17 varchar (514),
    ITEM_P05_A3_L18 varchar (514),
    ITEM_P05_A3_L19 varchar (514),
    ITEM_P05_A3_L20 varchar (514),
    ITEM_P05_A4 varchar (256),
    PROCESS_PRINT_TYPE varchar (1),
    MEMO varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_ITEM_1 UNIQUE (ITEM_ID_IN, ITEM_E18, VALID_START_STRING_DATE, PLACE_BY_OID, PLACE_SE_OID, BUYABLE)
);
CREATE INDEX IDXF_ITEM_ITEM_ID_IN ON ITEM (ITEM_ID_IN);
CREATE INDEX IDXF_ITEM_IDENTICAL_ITEM_ID ON ITEM (IDENTICAL_ITEM_ID, BUYABLE);
CREATE INDEX IDXF_ITEM_PLACE_BY_OID ON ITEM (PLACE_BY_OID);
CREATE INDEX IDXF_ITEM_PLACE_SE_OID ON ITEM (PLACE_SE_OID);
CREATE INDEX IDXF_ITEM_PLACE_OB_OID ON ITEM (PLACE_OB_OID);
CREATE INDEX IDXF_ITEM_PLACE_SF_OID ON ITEM (PLACE_SF_OID);
CREATE INDEX IDXF_ITEM_PLACE_ST_OID ON ITEM (PLACE_ST_OID);
CREATE INDEX IDXF_ITEM_IDENTICAL_OID_BUYABLE ON ITEM (IDENTICAL_ITEM_ID, OID, BUYABLE);

COMMENT ON TABLE ITEM IS '品番マスタ';
COMMENT ON COLUMN ITEM.OID IS 'OID';
COMMENT ON COLUMN ITEM.CHANGED IS '変更済';
COMMENT ON COLUMN ITEM.RELATED IS '連携済';
COMMENT ON COLUMN ITEM.RELATED_DATE IS '連携時刻';
COMMENT ON COLUMN ITEM.ITEM_ID_IN IS '品番';
COMMENT ON COLUMN ITEM.ITEM_ID_PD IS '表示用品番';
COMMENT ON COLUMN ITEM.ITEM_8 IS '品名';
COMMENT ON COLUMN ITEM.ITEM_E18 IS '部品取扱識別';
COMMENT ON COLUMN ITEM.IDENTICAL_ITEM_ID IS '同一品目ID';
COMMENT ON COLUMN ITEM.VALID_START_STRING_DATE IS '有効期限開始日 固定長日付';
COMMENT ON COLUMN ITEM.VALID_END_STRING_DATE IS '有効期限終了日 固定長日付';
COMMENT ON COLUMN ITEM.PLACE_BY_OID IS '発注者事業所工区OID';
COMMENT ON COLUMN ITEM.PLACE_SE_OID IS '受注者事業所工区OID';
COMMENT ON COLUMN ITEM.PLACE_OB_OID IS '発注元事業所工区OID';
COMMENT ON COLUMN ITEM.PLACE_SF_OID IS '出荷元事業所工区OID';
COMMENT ON COLUMN ITEM.PLACE_ST_OID IS '納入先事業所工区OID';
COMMENT ON COLUMN ITEM.PLACE_OF_LOADING_ID IS '出荷場所';
COMMENT ON COLUMN ITEM.PLACE_OF_LOADING_NAME IS '出荷場所名称';
COMMENT ON COLUMN ITEM.PLACE_OF_DISCHARGE_ID IS '納入場所';
COMMENT ON COLUMN ITEM.ITEM_E04 IS '背番号';
COMMENT ON COLUMN ITEM.PER_PACKAGE_QUANTITY IS '収容数';
COMMENT ON COLUMN ITEM.MANUFACTURING_DEPARTMENT_ID IS '所番地';
COMMENT ON COLUMN ITEM.PACKAGE_TYPE_DESCRIPTION_CODE IS '箱種';
COMMENT ON COLUMN ITEM.QUANTITY_UNIT_CODE IS '単位';
COMMENT ON COLUMN ITEM.BUYABLE IS '購買区分（購入、売り）';
COMMENT ON COLUMN ITEM.SUPPLY_TYPE IS '支給区分';
COMMENT ON COLUMN ITEM.ITEM_TYPE IS 'マスタ区分';
COMMENT ON COLUMN ITEM.THROUGH_TYPE IS 'スルー区分';
COMMENT ON COLUMN ITEM.MATERIALS_TYPE IS '出荷数変更区分';
COMMENT ON COLUMN ITEM.SEPARATE_SUPPLY_TYPE IS '別送支給区分';
COMMENT ON COLUMN ITEM.ITEM_M03 IS '納入サイクル';
COMMENT ON COLUMN ITEM.ITEM_ID_CL IS '部品色';
COMMENT ON COLUMN ITEM.ITEM_M01_DESC IS '納入方式';
COMMENT ON COLUMN ITEM.ITEM_P04_DETAIL IS '納品書フリー明細';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L01 IS '後工程エリア（１）－１';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L02 IS '後工程エリア（１）－２';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L03 IS '後工程エリア（１）－３';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L04 IS '後工程エリア（１）－４';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L05 IS '後工程エリア（１）－５';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L06 IS '後工程エリア（１）－６';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L07 IS '後工程エリア（１）－７';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L08 IS '後工程エリア（１）－８';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L09 IS '後工程エリア（１）－９';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L10 IS '後工程エリア（１）－１０';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L11 IS '後工程エリア（１）－１１';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L12 IS '後工程エリア（１）－１２';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L13 IS '後工程エリア（１）－１３';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L14 IS '後工程エリア（１）－１４';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L15 IS '後工程エリア（１）－１５';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L16 IS '後工程エリア（１）－１６';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L17 IS '後工程エリア（１）－１７';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L18 IS '後工程エリア（１）－１８';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L19 IS '後工程エリア（１）－１９';
COMMENT ON COLUMN ITEM.ITEM_P05_A1_L20 IS '後工程エリア（１）－２０';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L01 IS '後工程エリア（２）－１';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L02 IS '後工程エリア（２）－２';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L03 IS '後工程エリア（２）－３';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L04 IS '後工程エリア（２）－４';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L05 IS '後工程エリア（２）－５';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L06 IS '後工程エリア（２）－６';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L07 IS '後工程エリア（２）－７';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L08 IS '後工程エリア（２）－８';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L09 IS '後工程エリア（２）－９';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L10 IS '後工程エリア（２）－１０';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L11 IS '後工程エリア（２）－１１';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L12 IS '後工程エリア（２）－１２';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L13 IS '後工程エリア（２）－１３';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L14 IS '後工程エリア（２）－１４';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L15 IS '後工程エリア（２）－１５';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L16 IS '後工程エリア（２）－１６';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L17 IS '後工程エリア（２）－１７';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L18 IS '後工程エリア（２）－１８';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L19 IS '後工程エリア（２）－１９';
COMMENT ON COLUMN ITEM.ITEM_P05_A2_L20 IS '後工程エリア（２）－２０';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L01 IS '後工程エリア（３）－１';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L02 IS '後工程エリア（３）－２';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L03 IS '後工程エリア（３）－３';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L04 IS '後工程エリア（３）－４';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L05 IS '後工程エリア（３）－５';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L06 IS '後工程エリア（３）－６';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L07 IS '後工程エリア（３）－７';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L08 IS '後工程エリア（３）－８';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L09 IS '後工程エリア（３）－９';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L10 IS '後工程エリア（３）－１０';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L11 IS '後工程エリア（３）－１１';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L12 IS '後工程エリア（３）－１２';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L13 IS '後工程エリア（３）－１３';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L14 IS '後工程エリア（３）－１４';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L15 IS '後工程エリア（３）－１５';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L16 IS '後工程エリア（３）－１６';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L17 IS '後工程エリア（３）－１７';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L18 IS '後工程エリア（３）－１８';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L19 IS '後工程エリア（３）－１９';
COMMENT ON COLUMN ITEM.ITEM_P05_A3_L20 IS '後工程エリア（３）－２０';
COMMENT ON COLUMN ITEM.ITEM_P05_A4 IS 'QRフリー項目';
COMMENT ON COLUMN ITEM.MEMO IS '備考';
COMMENT ON COLUMN ITEM.PROCESS_PRINT_TYPE IS '帳票発行区分';

ALTER TABLE IF EXISTS public.ITEM
    OWNER to ediuser;

ALTER TABLE ITEM
    ADD CONSTRAINT fk_ITEM__1 FOREIGN KEY (
      PLACE_BY_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE ITEM
    ADD CONSTRAINT fk_ITEM__2 FOREIGN KEY (
      PLACE_SE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE ITEM
    ADD CONSTRAINT fk_ITEM__3 FOREIGN KEY (
      PLACE_OB_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE ITEM
    ADD CONSTRAINT fk_ITEM__4 FOREIGN KEY (
      PLACE_SF_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE ITEM
    ADD CONSTRAINT fk_ITEM__5 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- ITEM_TYPE_A04  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE ITEM_TYPE_A04 CASCADE;


CREATE TABLE ITEM_TYPE_A04
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    DESCRIPTION varchar (256) NOT NULL,
    NOTE varchar (256) NOT NULL,
    DEFAULT_FLAG char default 'N' NOT NULL,
    MEMO varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_ITEM_TYPE_A04_1 UNIQUE (DESCRIPTION)
);

COMMENT ON TABLE ITEM_TYPE_A04 IS '定期／不定期区分マスタ';
COMMENT ON COLUMN ITEM_TYPE_A04.OID IS 'OID';
COMMENT ON COLUMN ITEM_TYPE_A04.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN ITEM_TYPE_A04.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN ITEM_TYPE_A04.DESCRIPTION IS 'コード';
COMMENT ON COLUMN ITEM_TYPE_A04.NOTE IS '名称';
COMMENT ON COLUMN ITEM_TYPE_A04.DEFAULT_FLAG IS 'デフォルト可否';
COMMENT ON COLUMN ITEM_TYPE_A04.MEMO IS '備考';

ALTER TABLE IF EXISTS public.ITEM_TYPE_A04
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- ITEM_TYPE_M01  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE ITEM_TYPE_M01 CASCADE;


CREATE TABLE ITEM_TYPE_M01
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    DESCRIPTION varchar (256) NOT NULL,
    NOTE varchar (256) NOT NULL,
    DEFAULT_FLAG char default 'N' NOT NULL,
    MEMO varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_ITEM_TYPE_M01_1 UNIQUE (DESCRIPTION)
);

COMMENT ON TABLE ITEM_TYPE_M01 IS '納入方式マスタ';
COMMENT ON COLUMN ITEM_TYPE_M01.OID IS 'OID';
COMMENT ON COLUMN ITEM_TYPE_M01.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN ITEM_TYPE_M01.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN ITEM_TYPE_M01.DESCRIPTION IS 'コード';
COMMENT ON COLUMN ITEM_TYPE_M01.NOTE IS '名称';
COMMENT ON COLUMN ITEM_TYPE_M01.DEFAULT_FLAG IS 'デフォルト可否';
COMMENT ON COLUMN ITEM_TYPE_M01.MEMO IS '備考';

ALTER TABLE IF EXISTS public.ITEM_TYPE_M01
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- DELFOR_PS  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE DELFOR_PS CASCADE;


CREATE TABLE DELFOR_PS
(
    OID int8 NOT NULL,
    DOC_REF_ID_PS varchar (70) NOT NULL,
    DATE_FORMAT varchar (3) NOT NULL,
    DATE varchar (35) NOT NULL,
    PARTY_ID_BY varchar (35) NOT NULL,
    PLACE_ID_BY varchar (35) NOT NULL,
    PARTY_ID_SE varchar (35) NOT NULL,
    PLACE_ID_SE varchar (35) NOT NULL,
    ITEM_ID_IN varchar (256) NOT NULL,
    ITEM_E18 varchar (256),
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    PRIMARY KEY (OID),
    CONSTRAINT unq_DELFOR_PS_1 UNIQUE (DATE_FORMAT, DATE, PARTY_ID_BY, PLACE_ID_BY, PARTY_ID_SE, PLACE_ID_SE, ITEM_ID_IN, ITEM_E18),
    CONSTRAINT unq_DELFOR_PS_2 UNIQUE (DOC_REF_ID_PS, PARTY_ID_BY, PLACE_ID_BY, PARTY_ID_SE, PLACE_ID_SE)
);
CREATE INDEX IDX_DELFOR_PS_BY ON DELFOR_PS (DOC_REF_ID_PS, PARTY_ID_BY, PLACE_ID_BY);
CREATE INDEX IDX_DELFOR_PS_SE ON DELFOR_PS (DOC_REF_ID_PS, PARTY_ID_SE, PARTY_ID_SE);
CREATE INDEX IDX_DELFOR_PS_DOC_REF_ID_PS ON DELFOR_PS (DOC_REF_ID_PS);

COMMENT ON TABLE DELFOR_PS IS '内示注文明細番号ID';
COMMENT ON COLUMN DELFOR_PS.OID IS 'OID';
COMMENT ON COLUMN DELFOR_PS.DOC_REF_ID_PS IS '注文明細番号ID(DELFOR_GUID) xml1';
COMMENT ON COLUMN DELFOR_PS.DATE_FORMAT IS '日付のフォーマット';
COMMENT ON COLUMN DELFOR_PS.DATE IS '日付';
COMMENT ON COLUMN DELFOR_PS.PARTY_ID_BY IS '発注者';
COMMENT ON COLUMN DELFOR_PS.PLACE_ID_BY IS '発注者事業所';
COMMENT ON COLUMN DELFOR_PS.PARTY_ID_SE IS '受注者';
COMMENT ON COLUMN DELFOR_PS.PLACE_ID_SE IS '受注者事業所';
COMMENT ON COLUMN DELFOR_PS.ITEM_ID_IN IS '品番';
COMMENT ON COLUMN DELFOR_PS.ITEM_E18 IS '部品取扱識別';
COMMENT ON COLUMN DELFOR_PS.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';

ALTER TABLE IF EXISTS public.DELFOR_PS
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- DELFOR_HIERARCHY  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE DELFOR_HIERARCHY CASCADE;


CREATE TABLE DELFOR_HIERARCHY
(
    OID int8 NOT NULL,
      -- REFERENCES DELFOR_PS (OID)
    DELFOR_PS_OID int8 NOT NULL,
    HRC_LEVEL integer default 0 NOT NULL,
    PARTY_ID_BY varchar (35) NOT NULL,
    PLACE_ID_BY varchar (35) NOT NULL,
    PARTY_ID_SE varchar (35) NOT NULL,
    PLACE_ID_SE varchar (35) NOT NULL,
    PRIMARY KEY (OID),
    CONSTRAINT unq_DELFOR_HIERARCHY_1 UNIQUE (DELFOR_PS_OID, HRC_LEVEL)
);

COMMENT ON TABLE DELFOR_HIERARCHY IS '内示階層商流情報';
COMMENT ON COLUMN DELFOR_HIERARCHY.OID IS 'OID';
COMMENT ON COLUMN DELFOR_HIERARCHY.DELFOR_PS_OID IS '内示注文明細番号IDのOID';
COMMENT ON COLUMN DELFOR_HIERARCHY.HRC_LEVEL IS '階層レベル';
COMMENT ON COLUMN DELFOR_HIERARCHY.PARTY_ID_BY IS '発注者';
COMMENT ON COLUMN DELFOR_HIERARCHY.PLACE_ID_BY IS '発注者事業所';
COMMENT ON COLUMN DELFOR_HIERARCHY.PARTY_ID_SE IS '受注者';
COMMENT ON COLUMN DELFOR_HIERARCHY.PLACE_ID_SE IS '受注者事業所';

ALTER TABLE IF EXISTS public.DELFOR_HIERARCHY
    OWNER to ediuser;

ALTER TABLE DELFOR_HIERARCHY
    ADD CONSTRAINT fk_DELFOR_HIERARCHY__1 FOREIGN KEY (
      DELFOR_PS_OID
    )
    REFERENCES DELFOR_PS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE;


-----------------------------------------------------------------------------
-- TRANSPORT_PROCESS
-----------------------------------------------------------------------------
--DROP TABLE TRANSPORT_PROCESS CASCADE;


CREATE TABLE TRANSPORT_PROCESS
(
    OID int8 NOT NULL,
    TRANSPORT_DATA_TYPE varchar (2) NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_BY_OID int8,
      -- REFERENCES PLACE (OID)
    PLACE_SE_OID int8,
      -- REFERENCES PLACE (OID)
    PLACE_OB_OID int8,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_SF_OID int8 NOT NULL,
    PARTY_ID_BY varchar (35) NOT NULL,
    PLACE_ID_BY varchar (35) NOT NULL,
    PARTY_ID_SE varchar (35) NOT NULL,
    PLACE_ID_SE varchar (35) NOT NULL,
    PARTY_ID_OB varchar (35),
    PLACE_ID_OB varchar (35),
    PARTY_NAME_OB varchar (175),
    PLACE_NAME_OB varchar (175),
    PARTY_ID_ST varchar (35) NOT NULL,
    PLACE_ID_ST varchar (35) NOT NULL,
    PARTY_NAME_ST varchar (175),
    PLACE_NAME_ST varchar (175),
    PARTY_ID_SF varchar (35) NOT NULL,
    PLACE_ID_SF varchar (35) NOT NULL,
    PARTY_NAME_SF varchar (175),
    PLACE_NAME_SF varchar (175),
    PLACE_OF_DISCHARGE_ID varchar (35),
    PLACE_OF_LOADING_ID varchar (35),
    PLACE_OF_LOADING_NAME varchar (35),
    CONTACT_NAME varchar (256),
    DELIVERY_DATE_STRING_DATE varchar (8) NOT NULL,
    DATE_TIME_PERIOD_2_DELJIT varchar (35),
    DOC_REF_ID_AAJ varchar (70),
    DOC_REF_ID_AAU varchar (70) NOT NULL,
    ITEM_A04_DESC varchar (256),
    ITEM_A04_NOTE varchar (256),
    TRANSPORT_MEANS_IDENT_NAME varchar (70),
    ITEM_P04_L01 varchar (256),
    ITEM_P04_L02 varchar (256),
    ITEM_P04_L03 varchar (256),
    ITEM_P04_L04 varchar (256),
    DOC_REF_ID_P02 varchar (70),
    ITEM_P07 varchar (256),
    ZERO_RECEIVE char default 'N' NOT NULL,
    TRANSPORT_SEPARATE_SUPPLY_TYPE varchar (1) default '0' NOT NULL,
    MEMO varchar (128),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_TRANSPORT_PROCESS_1 UNIQUE (TRANSPORT_DATA_TYPE, PARTY_ID_SF, PLACE_ID_SF, PARTY_ID_ST, PLACE_ID_ST, PARTY_ID_BY, PLACE_ID_BY, PARTY_ID_SE, PLACE_ID_SE, DELIVERY_DATE_STRING_DATE, DOC_REF_ID_AAU, PLACE_OF_DISCHARGE_ID, PLACE_OF_LOADING_ID)
);
CREATE INDEX IDXF_TRANSPORT_PROCESS_BY ON TRANSPORT_PROCESS (PLACE_BY_OID);
CREATE INDEX IDXF_TRANSPORT_PROCESS_SE ON TRANSPORT_PROCESS (PLACE_SE_OID);
CREATE INDEX IDXF_TRANSPORT_PROCESS_OB ON TRANSPORT_PROCESS (PLACE_OB_OID);
CREATE INDEX IDXF_TRANSPORT_PROCESS_SF ON TRANSPORT_PROCESS (PLACE_SF_OID);
CREATE INDEX IDXF_TRANSPORT_PROCESS_ST ON TRANSPORT_PROCESS (PLACE_ST_OID);

COMMENT ON TABLE TRANSPORT_PROCESS IS '輸送プロセス';
COMMENT ON COLUMN TRANSPORT_PROCESS.OID IS 'OID';
COMMENT ON COLUMN TRANSPORT_PROCESS.TRANSPORT_DATA_TYPE IS '輸送データ種別';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_BY_OID IS '発注者事業所工区OID';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_SE_OID IS '受注者事業所工区OID';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_OB_OID IS '発注元事業所工区OID';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_ST_OID IS '納入先事業所工区OID';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_SF_OID IS '出荷元事業所工区OID';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_ID_BY IS '発注者';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_ID_BY IS '発注者事業所';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_ID_SE IS '受注者';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_ID_SE IS '受注者事業所';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_ID_OB IS '発注元';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_ID_OB IS '発注元事業所';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_NAME_OB IS '発注元名称';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_NAME_OB IS '発注元工場名';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_ID_ST IS '納入先';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_ID_ST IS '納入先工区';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_NAME_ST IS '納入先名称';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_NAME_ST IS '納入先工場名';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_ID_SF IS '出荷元';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_ID_SF IS '出荷元工区';
COMMENT ON COLUMN TRANSPORT_PROCESS.PARTY_NAME_SF IS '出荷元名称';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_NAME_SF IS '出荷元工場名';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_OF_DISCHARGE_ID IS '納入場所';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_OF_LOADING_ID IS '出荷場所';
COMMENT ON COLUMN TRANSPORT_PROCESS.PLACE_OF_LOADING_NAME IS '出荷場所名称';
COMMENT ON COLUMN TRANSPORT_PROCESS.CONTACT_NAME IS '手配担当';
COMMENT ON COLUMN TRANSPORT_PROCESS.DELIVERY_DATE_STRING_DATE IS '納入指示日 固定長日付';
COMMENT ON COLUMN TRANSPORT_PROCESS.DATE_TIME_PERIOD_2_DELJIT IS '納入指示時刻';
COMMENT ON COLUMN TRANSPORT_PROCESS.DOC_REF_ID_AAJ IS '便チケット番号';
COMMENT ON COLUMN TRANSPORT_PROCESS.DOC_REF_ID_AAU IS '納品書番号';
COMMENT ON COLUMN TRANSPORT_PROCESS.ITEM_A04_DESC IS '定期／不定期区分';
COMMENT ON COLUMN TRANSPORT_PROCESS.ITEM_A04_NOTE IS '定期／不定期区分名称';
COMMENT ON COLUMN TRANSPORT_PROCESS.TRANSPORT_MEANS_IDENT_NAME IS '便';
COMMENT ON COLUMN TRANSPORT_PROCESS.ITEM_P04_L01 IS '納品書フリーヘッダー１';
COMMENT ON COLUMN TRANSPORT_PROCESS.ITEM_P04_L02 IS '納品書フリーヘッダー２';
COMMENT ON COLUMN TRANSPORT_PROCESS.ITEM_P04_L03 IS '納品書フリーヘッダー３';
COMMENT ON COLUMN TRANSPORT_PROCESS.ITEM_P04_L04 IS '納品書フリーヘッダー４';
COMMENT ON COLUMN TRANSPORT_PROCESS.DOC_REF_ID_P02 IS 'かんばん発行有無';
COMMENT ON COLUMN TRANSPORT_PROCESS.ITEM_P07 IS '帳票発行指示区分';
COMMENT ON COLUMN TRANSPORT_PROCESS.ZERO_RECEIVE IS '0件受注フラグ';
COMMENT ON COLUMN TRANSPORT_PROCESS.TRANSPORT_SEPARATE_SUPPLY_TYPE IS '物流別送支給区分';
COMMENT ON COLUMN TRANSPORT_PROCESS.MEMO IS '備考';
COMMENT ON COLUMN TRANSPORT_PROCESS.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN TRANSPORT_PROCESS.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN TRANSPORT_PROCESS.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN TRANSPORT_PROCESS.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN TRANSPORT_PROCESS.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN TRANSPORT_PROCESS.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.TRANSPORT_PROCESS
    OWNER to ediuser;

ALTER TABLE TRANSPORT_PROCESS
    ADD CONSTRAINT fk_TRANSPORT_PROCESS__1 FOREIGN KEY (
      PLACE_BY_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE TRANSPORT_PROCESS
    ADD CONSTRAINT fk_TRANSPORT_PROCESS__2 FOREIGN KEY (
      PLACE_SE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE TRANSPORT_PROCESS
    ADD CONSTRAINT fk_TRANSPORT_PROCESS__3 FOREIGN KEY (
      PLACE_OB_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE TRANSPORT_PROCESS
    ADD CONSTRAINT fk_TRANSPORT_PROCESS__4 FOREIGN KEY (
      PLACE_SF_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE TRANSPORT_PROCESS
    ADD CONSTRAINT fk_TRANSPORT_PROCESS__5 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- TRANSPORT_HEADER
-----------------------------------------------------------------------------
--DROP TABLE TRANSPORT_HEADER CASCADE;


CREATE TABLE TRANSPORT_HEADER
(
    OID int8 NOT NULL,
    TRANSPORT_DATA_TYPE varchar (2) NOT NULL,
    AA_SENDER_ID varchar (35),
    AA_INTERCHANGE_DATE_TIME varchar (19),
    AA_BODID varchar (14),
    AA_RECEIVER_ID varchar (35),
    AA_MESSAGE_DIRECTION varchar (1),
    SYNC_CODE varchar (3) NOT NULL,
    MESSAGE_TYPE varchar (4) NOT NULL,
    MESSAGE_TYPE_CODE varchar (3),
    MESSAGE_TYPE_CODE_NAME varchar (35),
    DOCUMENT_DATE_TIME varchar (35) NOT NULL,
    DATE_TIME_PERIOD_257 varchar (35),
    PARTY_NAME_ST varchar (175),
    PLACE_NAME_ST varchar (175),
    PARTY_NAME_SF varchar (175),
    PLACE_NAME_SF varchar (175),
    MEMO varchar (128),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);

COMMENT ON TABLE TRANSPORT_HEADER IS '輸送ヘッダー';
COMMENT ON COLUMN TRANSPORT_HEADER.OID IS 'OID';
COMMENT ON COLUMN TRANSPORT_HEADER.TRANSPORT_DATA_TYPE IS '輸送データ種別';
COMMENT ON COLUMN TRANSPORT_HEADER.AA_SENDER_ID IS '送受信情報 送信者';
COMMENT ON COLUMN TRANSPORT_HEADER.AA_INTERCHANGE_DATE_TIME IS '送受信情報 送信日時刻';
COMMENT ON COLUMN TRANSPORT_HEADER.AA_BODID IS '送受信情報 処理番号';
COMMENT ON COLUMN TRANSPORT_HEADER.AA_RECEIVER_ID IS '送受信情報 受信者';
COMMENT ON COLUMN TRANSPORT_HEADER.AA_MESSAGE_DIRECTION IS '送受信情報 メッセージ送受信方向';
COMMENT ON COLUMN TRANSPORT_HEADER.SYNC_CODE IS '変更情報提供識別';
COMMENT ON COLUMN TRANSPORT_HEADER.MESSAGE_TYPE IS '業務要件でのメッセージの識別(業務要件でのメッセージの識別情報区分コードの上4桁)';
COMMENT ON COLUMN TRANSPORT_HEADER.MESSAGE_TYPE_CODE IS '業務要件でのメッセージの識別';
COMMENT ON COLUMN TRANSPORT_HEADER.MESSAGE_TYPE_CODE_NAME IS '業務要件でのメッセージの識別情報区分コード';
COMMENT ON COLUMN TRANSPORT_HEADER.DOCUMENT_DATE_TIME IS '発行日';
COMMENT ON COLUMN TRANSPORT_HEADER.DATE_TIME_PERIOD_257 IS '処理日';
COMMENT ON COLUMN TRANSPORT_HEADER.PARTY_NAME_ST IS '納入先名称';
COMMENT ON COLUMN TRANSPORT_HEADER.PLACE_NAME_ST IS '納入先工場名';
COMMENT ON COLUMN TRANSPORT_HEADER.PARTY_NAME_SF IS '出荷元名称';
COMMENT ON COLUMN TRANSPORT_HEADER.PLACE_NAME_SF IS '出荷元工場名';
COMMENT ON COLUMN TRANSPORT_HEADER.MEMO IS '備考';
COMMENT ON COLUMN TRANSPORT_HEADER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN TRANSPORT_HEADER.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN TRANSPORT_HEADER.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN TRANSPORT_HEADER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN TRANSPORT_HEADER.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN TRANSPORT_HEADER.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.TRANSPORT_HEADER
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- TRANSPORT_OPTION
-----------------------------------------------------------------------------
--DROP TABLE TRANSPORT_OPTION CASCADE;


CREATE TABLE TRANSPORT_OPTION
(
    OID int8 NOT NULL,
    ITEM_A04_DESC varchar (256),
    ITEM_A04_NOTE varchar (256),
    ITEM_A02 varchar (256),
    DATE_TIME_PERIOD_2_DELJIT varchar (35),
    ITEM_L01 varchar (256),
    ITEM_ID_PD varchar (256),
    ITEM_E04 varchar (256),
    MANUFACTURING_DEPARTMENT_ID text,
    PACKAGE_TYPE_DESCRIPTION_CODE varchar (256),
    ITEM_67 varchar (256),
    QUANTITY_143 int8,
    ITEM_H02 varchar (256),
    ITEM_P08 text,
    CONTACT_NAME varchar (256),
    ITEM_P04_L01 varchar (256),
    ITEM_P04_L02 varchar (256),
    ITEM_P04_L03 varchar (256),
    ITEM_P04_L04 varchar (256),
    ITEM_P04_DETAIL varchar (256),
    ITEM_M01_DESC varchar (256),
    ITEM_M01_NOTE varchar (256),
    ITEM_P07 varchar (256),
    ITEM_P05_A1_PATTERN varchar (514),
    ITEM_P05_A1_L01 text,
    ITEM_P05_A1_L02 text,
    ITEM_P05_A1_L03 text,
    ITEM_P05_A1_L04 text,
    ITEM_P05_A1_L05 text,
    ITEM_P05_A1_L06 varchar (514),
    ITEM_P05_A1_L07 varchar (514),
    ITEM_P05_A1_L08 varchar (514),
    ITEM_P05_A1_L09 varchar (514),
    ITEM_P05_A1_L10 varchar (514),
    ITEM_P05_A1_L11 varchar (514),
    ITEM_P05_A1_L12 varchar (514),
    ITEM_P05_A1_L13 varchar (514),
    ITEM_P05_A1_L14 varchar (514),
    ITEM_P05_A1_L15 varchar (514),
    ITEM_P05_A1_L16 varchar (514),
    ITEM_P05_A1_L17 varchar (514),
    ITEM_P05_A1_L18 varchar (514),
    ITEM_P05_A1_L19 varchar (514),
    ITEM_P05_A1_L20 varchar (514),
    ITEM_P05_A2_PATTERN varchar (514),
    ITEM_P05_A2_L01 text,
    ITEM_P05_A2_L02 varchar (514),
    ITEM_P05_A2_L03 text,
    ITEM_P05_A2_L04 varchar (514),
    ITEM_P05_A2_L05 text,
    ITEM_P05_A2_L06 varchar (514),
    ITEM_P05_A2_L07 varchar (514),
    ITEM_P05_A2_L08 varchar (514),
    ITEM_P05_A2_L09 varchar (514),
    ITEM_P05_A2_L10 varchar (514),
    ITEM_P05_A2_L11 varchar (514),
    ITEM_P05_A2_L12 varchar (514),
    ITEM_P05_A2_L13 varchar (514),
    ITEM_P05_A2_L14 varchar (514),
    ITEM_P05_A2_L15 varchar (514),
    ITEM_P05_A2_L16 varchar (514),
    ITEM_P05_A2_L17 varchar (514),
    ITEM_P05_A2_L18 varchar (514),
    ITEM_P05_A2_L19 varchar (514),
    ITEM_P05_A2_L20 varchar (514),
    ITEM_P05_A3_PATTERN varchar (514),
    ITEM_P05_A3_L01 varchar (514),
    ITEM_P05_A3_L02 varchar (514),
    ITEM_P05_A3_L03 varchar (514),
    ITEM_P05_A3_L04 varchar (514),
    ITEM_P05_A3_L05 varchar (514),
    ITEM_P05_A3_L06 varchar (514),
    ITEM_P05_A3_L07 varchar (514),
    ITEM_P05_A3_L08 varchar (514),
    ITEM_P05_A3_L09 varchar (514),
    ITEM_P05_A3_L10 varchar (514),
    ITEM_P05_A3_L11 varchar (514),
    ITEM_P05_A3_L12 varchar (514),
    ITEM_P05_A3_L13 varchar (514),
    ITEM_P05_A3_L14 varchar (514),
    ITEM_P05_A3_L15 varchar (514),
    ITEM_P05_A3_L16 varchar (514),
    ITEM_P05_A3_L17 varchar (514),
    ITEM_P05_A3_L18 varchar (514),
    ITEM_P05_A3_L19 varchar (514),
    ITEM_P05_A3_L20 varchar (514),
    ITEM_P05_A4 varchar (256),
    REPORT_START_INDEX integer default 0,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);

COMMENT ON TABLE TRANSPORT_OPTION IS '輸送トランザクションオプション';
COMMENT ON COLUMN TRANSPORT_OPTION.OID IS 'OID';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_A04_DESC IS '定期／不定期区分';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_A04_NOTE IS '定期／不定期区分名称';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_A02 IS '適用業務区分';
COMMENT ON COLUMN TRANSPORT_OPTION.DATE_TIME_PERIOD_2_DELJIT IS '納入指示時刻';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_L01 IS '輸送識別';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_ID_PD IS '表示用品番';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_E04 IS '背番号';
COMMENT ON COLUMN TRANSPORT_OPTION.MANUFACTURING_DEPARTMENT_ID IS '所番地';
COMMENT ON COLUMN TRANSPORT_OPTION.PACKAGE_TYPE_DESCRIPTION_CODE IS '箱種';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_67 IS '打切区分';
COMMENT ON COLUMN TRANSPORT_OPTION.QUANTITY_143 IS '打切残数';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_H02 IS '端数区分';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P08 IS '枝番';
COMMENT ON COLUMN TRANSPORT_OPTION.CONTACT_NAME IS '手配担当';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P04_L01 IS '納品書フリーヘッダー１';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P04_L02 IS '納品書フリーヘッダー２';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P04_L03 IS '納品書フリーヘッダー３';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P04_L04 IS '納品書フリーヘッダー４';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P04_DETAIL IS '納品書フリー明細';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_M01_DESC IS '納入方式';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_M01_NOTE IS '納入方式名称';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P07 IS '帳票発行指示区分';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_PATTERN IS '後工程エリア（１）パターン';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L01 IS '後工程エリア（１）－１';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L02 IS '後工程エリア（１）－２';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L03 IS '後工程エリア（１）－３';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L04 IS '後工程エリア（１）－４';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L05 IS '後工程エリア（１）－５';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L06 IS '後工程エリア（１）－６';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L07 IS '後工程エリア（１）－７';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L08 IS '後工程エリア（１）－８';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L09 IS '後工程エリア（１）－９';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L10 IS '後工程エリア（１）－１０';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L11 IS '後工程エリア（１）－１１';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L12 IS '後工程エリア（１）－１２';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L13 IS '後工程エリア（１）－１３';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L14 IS '後工程エリア（１）－１４';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L15 IS '後工程エリア（１）－１５';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L16 IS '後工程エリア（１）－１６';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L17 IS '後工程エリア（１）－１７';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L18 IS '後工程エリア（１）－１８';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L19 IS '後工程エリア（１）－１９';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A1_L20 IS '後工程エリア（１）－２０';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_PATTERN IS '後工程エリア（２）パターン';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L01 IS '後工程エリア（２）－１';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L02 IS '後工程エリア（２）－２';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L03 IS '後工程エリア（２）－３';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L04 IS '後工程エリア（２）－４';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L05 IS '後工程エリア（２）－５';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L06 IS '後工程エリア（２）－６';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L07 IS '後工程エリア（２）－７';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L08 IS '後工程エリア（２）－８';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L09 IS '後工程エリア（２）－９';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L10 IS '後工程エリア（２）－１０';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L11 IS '後工程エリア（２）－１１';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L12 IS '後工程エリア（２）－１２';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L13 IS '後工程エリア（２）－１３';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L14 IS '後工程エリア（２）－１４';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L15 IS '後工程エリア（２）－１５';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L16 IS '後工程エリア（２）－１６';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L17 IS '後工程エリア（２）－１７';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L18 IS '後工程エリア（２）－１８';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L19 IS '後工程エリア（２）－１９';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A2_L20 IS '後工程エリア（２）－２０';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_PATTERN IS '後工程エリア（３）パターン';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L01 IS '後工程エリア（３）－１';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L02 IS '後工程エリア（３）－２';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L03 IS '後工程エリア（３）－３';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L04 IS '後工程エリア（３）－４';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L05 IS '後工程エリア（３）－５';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L06 IS '後工程エリア（３）－６';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L07 IS '後工程エリア（３）－７';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L08 IS '後工程エリア（３）－８';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L09 IS '後工程エリア（３）－９';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L10 IS '後工程エリア（３）－１０';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L11 IS '後工程エリア（３）－１１';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L12 IS '後工程エリア（３）－１２';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L13 IS '後工程エリア（３）－１３';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L14 IS '後工程エリア（３）－１４';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L15 IS '後工程エリア（３）－１５';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L16 IS '後工程エリア（３）－１６';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L17 IS '後工程エリア（３）－１７';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L18 IS '後工程エリア（３）－１８';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L19 IS '後工程エリア（３）－１９';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A3_L20 IS '後工程エリア（３）－２０';
COMMENT ON COLUMN TRANSPORT_OPTION.ITEM_P05_A4 IS 'QRフリー項目';
COMMENT ON COLUMN TRANSPORT_OPTION.REPORT_START_INDEX IS '帳票発行開始番号';
COMMENT ON COLUMN TRANSPORT_OPTION.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN TRANSPORT_OPTION.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN TRANSPORT_OPTION.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN TRANSPORT_OPTION.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN TRANSPORT_OPTION.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN TRANSPORT_OPTION.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.TRANSPORT_OPTION
    OWNER to ediuser;



-----------------------------------------------------------------------------
-- TRANSPORT_TRANSACTION
-----------------------------------------------------------------------------
--DROP TABLE TRANSPORT_TRANSACTION CASCADE;


CREATE TABLE TRANSPORT_TRANSACTION
(
      -- REFERENCES CHAIN_DATA (OID)
    OID int8 NOT NULL,
    TRANSACTION_STATUS varchar (10) NOT NULL,
    CANCEL_STATUS varchar (2) NOT NULL,
      -- REFERENCES TRANSPORT_PROCESS (OID)
    PROCESS_OID int8 NOT NULL,
      -- REFERENCES TRANSPORT_HEADER (OID)
    HEADER_OID int8 NOT NULL,
      -- REFERENCES TRANSPORT_OPTION (OID)
    OPTION_OID int8 NOT NULL,
    DOC_REF_ID_PS varchar (70) NOT NULL,
    DOC_REF_LINE_NUMBER_PS varchar (6),
    DOC_REF_ID_XSI varchar (70) NOT NULL,
    ITEM_ID_IN varchar (256) NOT NULL,
    ITEM_ID_CL varchar (256),
    ITEM_8 varchar (256),
    ITEM_E18 varchar (256),
    PER_PACKAGE_QUANTITY int8,
    NUMBER_OF_PACKAGES_QUANTITY int8,
    DOC_REF_ID_AAN varchar (70),
    DOC_REF_ID_AAK_PAGE integer,
    DOC_REF_ID_AAK_LINE integer,
    QUANTITY_113 int8,
    QUANTITY_12 int8,
    QUANTITY_UNIT_CODE varchar (3),
    PLACE_OF_DISCHARGE_ID varchar (35),
    PLACE_OF_LOADING_ID varchar (35),
    PLACE_OF_LOADING_NAME varchar (35),
    DELIVERY_DATE_STRING_DATE varchar (8),
    DOC_REF_ID_AAJ varchar (70),
    DOC_REF_ID_AAU varchar (70),
    TRANSPORT_MEANS_IDENT_NAME varchar (70),
    MEMO varchar (128),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDXF_TRANSPORT_TRAN_PROCESS ON TRANSPORT_TRANSACTION (PROCESS_OID);
CREATE INDEX IDXF_TRANSPORT_TRAN_HEADER ON TRANSPORT_TRANSACTION (HEADER_OID);
CREATE INDEX IDXF_TRANSPORT_TRAN_OPTION ON TRANSPORT_TRANSACTION (OPTION_OID);
CREATE INDEX IDXF_TRANSPORT_TRAN_TRANSACTION_STATUS ON TRANSPORT_TRANSACTION (TRANSACTION_STATUS);
CREATE INDEX IDXF_TRANSPORT_TRAN_TRANSACTION_XSI ON TRANSPORT_TRANSACTION (DOC_REF_ID_XSI, DOC_REF_ID_AAU, DOC_REF_ID_AAK_PAGE, DOC_REF_ID_AAK_LINE);

COMMENT ON TABLE TRANSPORT_TRANSACTION IS '輸送トランザクション';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.OID IS 'OID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TRANSACTION_STATUS IS 'ステータス';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.CANCEL_STATUS IS 'キャンセルステータス';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.PROCESS_OID IS 'プロセスOID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.HEADER_OID IS 'ヘッダーOID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.OPTION_OID IS 'トランザクションオプションOID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_ID_PS IS '注文明細番号ID(DELFOR_GUID) xml1';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_LINE_NUMBER_PS IS '注文明細番号(DELFOR_GUIDの予備) xml2';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_ID_XSI IS '納入指示ID xml3';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.ITEM_ID_IN IS '品番';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.ITEM_ID_CL IS '部品色';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.ITEM_8 IS '品名';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.ITEM_E18 IS '部品取扱識別';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.PER_PACKAGE_QUANTITY IS '収容数';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.NUMBER_OF_PACKAGES_QUANTITY IS '梱包／包装単位個数';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_ID_AAN IS '発行番号';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_ID_AAK_PAGE IS 'ページ数';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_ID_AAK_LINE IS '行No';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.QUANTITY_113 IS '納入指示数';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.QUANTITY_12 IS '出荷数';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.QUANTITY_UNIT_CODE IS '単位';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.PLACE_OF_DISCHARGE_ID IS '納入場所';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.PLACE_OF_LOADING_ID IS '出荷場所';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.PLACE_OF_LOADING_NAME IS '出荷場所名称';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DELIVERY_DATE_STRING_DATE IS '納入指示日 固定長日付';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_ID_AAJ IS '便チケット番号';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.DOC_REF_ID_AAU IS '納品書番号';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TRANSPORT_MEANS_IDENT_NAME IS '便';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.MEMO IS '備考';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.OID IS 'OID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN TRANSPORT_TRANSACTION.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.TRANSPORT_TRANSACTION
    OWNER to ediuser;

ALTER TABLE TRANSPORT_TRANSACTION
    ADD CONSTRAINT fk_TRANSPORT_TRANSACTION__2 FOREIGN KEY (
      PROCESS_OID
    )
    REFERENCES TRANSPORT_PROCESS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE TRANSPORT_TRANSACTION
    ADD CONSTRAINT fk_TRANSPORT_TRANSACTION__3 FOREIGN KEY (
      HEADER_OID
    )
    REFERENCES TRANSPORT_HEADER (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE TRANSPORT_TRANSACTION
    ADD CONSTRAINT fk_TRANSPORT_TRANSACTION__4 FOREIGN KEY (
      OPTION_OID
    )
    REFERENCES TRANSPORT_OPTION (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- SHIPMENT  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE SHIPMENT CASCADE;


CREATE TABLE SHIPMENT
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_SF_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
    SHIPMENT_NO integer NOT NULL,
    SHIPMENT_TIME varchar (4) NOT NULL,
    PRIMARY KEY (OID),
    CONSTRAINT unq_SHIPMENT_1 UNIQUE (OWN_PARTY_ID, OWN_PLACE_ID, PLACE_SF_OID, PLACE_ST_OID, SHIPMENT_NO)
);
CREATE INDEX IDXF_SHIPMENT_PLACE_SF_OID ON SHIPMENT (OWN_PARTY_ID, OWN_PLACE_ID, PLACE_SF_OID);
CREATE INDEX IDXF_SHIPMENT_PLACE_ST_OID ON SHIPMENT (OWN_PARTY_ID, OWN_PLACE_ID, PLACE_ST_OID);

COMMENT ON TABLE SHIPMENT IS '便マスタ';
COMMENT ON COLUMN SHIPMENT.OID IS 'OID';
COMMENT ON COLUMN SHIPMENT.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN SHIPMENT.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN SHIPMENT.PLACE_SF_OID IS '出荷元事業所工区OID';
COMMENT ON COLUMN SHIPMENT.PLACE_ST_OID IS '納入先事業所工区OID';
COMMENT ON COLUMN SHIPMENT.SHIPMENT_NO IS '納入便';
COMMENT ON COLUMN SHIPMENT.SHIPMENT_TIME IS '納入時刻（HHMM）';

ALTER TABLE IF EXISTS public.SHIPMENT
    OWNER to ediuser;

ALTER TABLE SHIPMENT
    ADD CONSTRAINT fk_SHIPMENT__1 FOREIGN KEY (
      PLACE_SF_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE SHIPMENT
    ADD CONSTRAINT fk_SHIPMENT__2 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- DELJIT_NO_MANAGER
-----------------------------------------------------------------------------
--DROP TABLE DELJIT_NO_MANAGER CASCADE;


CREATE TABLE DELJIT_NO_MANAGER
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    DELIVERY_DATE varchar (8) NOT NULL,
    DELJIT_NO int8,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_DELJIT_NO_MANAGER_1 UNIQUE (OWN_PARTY_ID, OWN_PLACE_ID, DELIVERY_DATE)
);

COMMENT ON TABLE DELJIT_NO_MANAGER IS '納品指示番号管理';
COMMENT ON COLUMN DELJIT_NO_MANAGER.OID IS 'OID';
COMMENT ON COLUMN DELJIT_NO_MANAGER.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN DELJIT_NO_MANAGER.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN DELJIT_NO_MANAGER.DELIVERY_DATE IS '納入指示日';
COMMENT ON COLUMN DELJIT_NO_MANAGER.DELJIT_NO IS '納品指示番号(数値)';
COMMENT ON COLUMN DELJIT_NO_MANAGER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN DELJIT_NO_MANAGER.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN DELJIT_NO_MANAGER.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN DELJIT_NO_MANAGER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN DELJIT_NO_MANAGER.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN DELJIT_NO_MANAGER.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.DELJIT_NO_MANAGER
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- THREAD_MANAGER
-----------------------------------------------------------------------------
--DROP TABLE THREAD_MANAGER CASCADE;


CREATE TABLE THREAD_MANAGER
(
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    ID varchar (30) NOT NULL,
    THREAD_STATUS varchar (30) NOT NULL,
    THREAD_CATEGORY varchar (40) NOT NULL,
      -- REFERENCES USERS (OID)
    USERS_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    USER_PLACE_OID int8 NOT NULL,
    START_UP_TIME timestamp,
    CLOSE_OUT_TIME timestamp,
    ERROR_MESSAGE text,
    MEMO varchar (128),
    PRIMARY KEY (OWN_PARTY_ID, OWN_PLACE_ID, ID)
);
CREATE INDEX IDXF_THREAD_MANAGER_USERS ON THREAD_MANAGER (USERS_OID);
CREATE INDEX IDXF_THREAD_MANAGER_PLACE ON THREAD_MANAGER (USER_PLACE_OID);

COMMENT ON TABLE THREAD_MANAGER IS 'スレッド管理';
COMMENT ON COLUMN THREAD_MANAGER.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN THREAD_MANAGER.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN THREAD_MANAGER.ID IS 'スレッドID';
COMMENT ON COLUMN THREAD_MANAGER.THREAD_STATUS IS 'スレッドステータス';
COMMENT ON COLUMN THREAD_MANAGER.THREAD_CATEGORY IS 'スレッドカテゴリー(ロック管理のID)';
COMMENT ON COLUMN THREAD_MANAGER.USERS_OID IS '実行ユーザーOID';
COMMENT ON COLUMN THREAD_MANAGER.USER_PLACE_OID IS '実行事業所OID';
COMMENT ON COLUMN THREAD_MANAGER.START_UP_TIME IS '開始日時';
COMMENT ON COLUMN THREAD_MANAGER.CLOSE_OUT_TIME IS '終了日時';
COMMENT ON COLUMN THREAD_MANAGER.ERROR_MESSAGE IS 'メッセージ';
COMMENT ON COLUMN THREAD_MANAGER.MEMO IS '備考';

ALTER TABLE IF EXISTS public.THREAD_MANAGER
    OWNER to ediuser;

ALTER TABLE THREAD_MANAGER
    ADD CONSTRAINT fk_THREAD_MANAGER__1 FOREIGN KEY (
      USERS_OID
    )
    REFERENCES USERS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE THREAD_MANAGER
    ADD CONSTRAINT fk_THREAD_MANAGER__2 FOREIGN KEY (
      USER_PLACE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- LOCK_MANAGER
-----------------------------------------------------------------------------
--DROP TABLE LOCK_MANAGER CASCADE;


CREATE TABLE LOCK_MANAGER
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    THREAD_ID varchar (40) NOT NULL,
      -- REFERENCES USERS (OID)
    USERS_OID int8 NOT NULL,
    LOCK_STATUS char NOT NULL,
    START_UP_TIME timestamp,
    CLOSE_OUT_TIME timestamp,
    MEMO varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_LOCK_MANAGER_1 UNIQUE (OWN_PARTY_ID, OWN_PLACE_ID, THREAD_ID)
);
CREATE INDEX IDXF_LOCK_MANAGER_USERS ON LOCK_MANAGER (USERS_OID);

COMMENT ON TABLE LOCK_MANAGER IS 'ロック管理';
COMMENT ON COLUMN LOCK_MANAGER.OID IS 'OID';
COMMENT ON COLUMN LOCK_MANAGER.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN LOCK_MANAGER.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN LOCK_MANAGER.THREAD_ID IS 'スレッドID';
COMMENT ON COLUMN LOCK_MANAGER.USERS_OID IS '実行ユーザーOID';
COMMENT ON COLUMN LOCK_MANAGER.LOCK_STATUS IS 'ロック状態';
COMMENT ON COLUMN LOCK_MANAGER.START_UP_TIME IS '開始日時';
COMMENT ON COLUMN LOCK_MANAGER.CLOSE_OUT_TIME IS '終了日時';
COMMENT ON COLUMN LOCK_MANAGER.MEMO IS '備考';

ALTER TABLE IF EXISTS public.LOCK_MANAGER
    OWNER to ediuser;

ALTER TABLE LOCK_MANAGER
    ADD CONSTRAINT fk_LOCK_MANAGER__2 FOREIGN KEY (
      USERS_OID
    )
    REFERENCES USERS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPT_PLACE  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE OPT_PLACE CASCADE;


CREATE TABLE OPT_PLACE
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    DISCHARGE char default 'Y' NOT NULL,
    CODE varchar NOT NULL,
    NAME varchar (128),
    OPT_PLACE_TYPE varchar (1) NOT NULL,
    AREA_PATTERN varchar (2),
    PRINT_SIKIRI_TYPE varchar (2),
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPT_PLACE_1 UNIQUE (OWN_PARTY_ID, OWN_PLACE_ID, DISCHARGE, CODE)
);
CREATE INDEX IDXF_OPT_PLACE_PLACE ON OPT_PLACE (OWN_PARTY_ID, OWN_PLACE_ID);

COMMENT ON TABLE OPT_PLACE IS '受入出荷場情報';
COMMENT ON COLUMN OPT_PLACE.OID IS 'OID';
COMMENT ON COLUMN OPT_PLACE.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN OPT_PLACE.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN OPT_PLACE.DISCHARGE IS '受入出荷場フラグ Y:納入場所 N:出荷場所';
COMMENT ON COLUMN OPT_PLACE.CODE IS '受入出荷場コード';
COMMENT ON COLUMN OPT_PLACE.NAME IS '受入出荷場名称';
COMMENT ON COLUMN OPT_PLACE.OPT_PLACE_TYPE IS '受入出荷場タイプ';
COMMENT ON COLUMN OPT_PLACE.AREA_PATTERN IS '前工程エリアパターン';
COMMENT ON COLUMN OPT_PLACE.PRINT_SIKIRI_TYPE IS '仕切り発行区分';

ALTER TABLE IF EXISTS public.OPT_PLACE
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- OPT_SYSTEM_CONFIG  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE OPT_SYSTEM_CONFIG CASCADE;


CREATE TABLE OPT_SYSTEM_CONFIG
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
    CATEGORY varchar (50) NOT NULL,
      -- REFERENCES OPT_PLACE (OID)
    OPT_PLACE_OID int8,
    PARAMETER varchar (255),
    MEMO varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPT_SYSTEM_CONFIG_1 UNIQUE (CATEGORY, OPT_PLACE_OID)
);
CREATE INDEX IDXF_OPT_SYSTEM_CONFIG_OPT_PLACE_OID ON OPT_SYSTEM_CONFIG (OPT_PLACE_OID);

COMMENT ON TABLE OPT_SYSTEM_CONFIG IS '受入出荷場対応システムパラメータ要素';
COMMENT ON COLUMN OPT_SYSTEM_CONFIG.OID IS 'OID';
COMMENT ON COLUMN OPT_SYSTEM_CONFIG.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN OPT_SYSTEM_CONFIG.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN OPT_SYSTEM_CONFIG.CATEGORY IS 'カテゴリー';
COMMENT ON COLUMN OPT_SYSTEM_CONFIG.OPT_PLACE_OID IS '受入出荷場OID';
COMMENT ON COLUMN OPT_SYSTEM_CONFIG.PARAMETER IS 'パラメータ';
COMMENT ON COLUMN OPT_SYSTEM_CONFIG.MEMO IS '備考';

ALTER TABLE IF EXISTS public.OPT_PLACE
    OWNER to ediuser;

ALTER TABLE OPT_SYSTEM_CONFIG
    ADD CONSTRAINT fk_OPT_SYSTEM_CONFIG__1 FOREIGN KEY (
      OPT_PLACE_OID
    )
    REFERENCES OPT_PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPT_SHIPMENT  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE OPT_SHIPMENT CASCADE;


CREATE TABLE OPT_SHIPMENT
(
    OID int8 NOT NULL,
    OWN_PARTY_ID varchar (35) NOT NULL,
    OWN_PLACE_ID varchar (35) NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_SF_OID int8 NOT NULL,
      -- REFERENCES OPT_PLACE (OID)
    OPT_PLACE_ST_OID int8 NOT NULL,
    SHIPMENT_NO integer NOT NULL,
    SHIPMENT_TIME varchar (4) NOT NULL,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPT_SHIPMENT_1 UNIQUE (OWN_PARTY_ID, OWN_PLACE_ID, PLACE_SF_OID, OPT_PLACE_ST_OID, SHIPMENT_NO)
);
CREATE INDEX IDXF_OPT_SHIPMENT_PLACE_SF_OID ON OPT_SHIPMENT (PLACE_SF_OID);
CREATE INDEX IDXF_OPT_SHIPMENT_OPT_PLACE_ST_OID ON OPT_SHIPMENT (OPT_PLACE_ST_OID);

COMMENT ON TABLE OPT_SHIPMENT IS '受入出荷場対応便マスタ';
COMMENT ON COLUMN OPT_SHIPMENT.OID IS 'OID';
COMMENT ON COLUMN OPT_SHIPMENT.OWN_PARTY_ID IS '自社企業コード';
COMMENT ON COLUMN OPT_SHIPMENT.OWN_PLACE_ID IS '自社工区コード';
COMMENT ON COLUMN OPT_SHIPMENT.PLACE_SF_OID IS '出荷元事業所工区OID';
COMMENT ON COLUMN OPT_SHIPMENT.OPT_PLACE_ST_OID IS '受入出荷場OID';
COMMENT ON COLUMN OPT_SHIPMENT.SHIPMENT_NO IS '納入便';
COMMENT ON COLUMN OPT_SHIPMENT.SHIPMENT_TIME IS '納入時刻（HHMM）';

ALTER TABLE IF EXISTS public.OPT_SHIPMENT
    OWNER to ediuser;

ALTER TABLE OPT_SHIPMENT
    ADD CONSTRAINT fk_OPT_SHIPMENT__1 FOREIGN KEY (
      PLACE_SF_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPT_SHIPMENT
    ADD CONSTRAINT fk_OPT_SHIPMENT__2 FOREIGN KEY (
      OPT_PLACE_ST_OID
    )
    REFERENCES OPT_PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPT_USERS  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE OPT_USERS CASCADE;


CREATE TABLE OPT_USERS
(
    OID int8 NOT NULL,
      -- REFERENCES USERS (OID)
    USERS_OID int8 NOT NULL,
      -- REFERENCES OPT_PLACE (OID)
    LOADING_OID int8,
      -- REFERENCES OPT_PLACE (OID)
    DISCHARGE_OID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDXF_OPT_USERS_USERS_OID ON OPT_USERS (USERS_OID);

COMMENT ON TABLE OPT_USERS IS 'ユーザー受入出荷場情報';
COMMENT ON COLUMN OPT_USERS.OID IS 'OID';
COMMENT ON COLUMN OPT_USERS.USERS_OID IS '親ユーザーOID';
COMMENT ON COLUMN OPT_USERS.LOADING_OID IS '出荷場所OID';
COMMENT ON COLUMN OPT_USERS.DISCHARGE_OID IS '納入場所OID';

ALTER TABLE IF EXISTS public.OPT_USERS
    OWNER to ediuser;

ALTER TABLE OPT_USERS
    ADD CONSTRAINT fk_OPT_USERS__1 FOREIGN KEY (
      USERS_OID
    )
    REFERENCES USERS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPT_USERS
    ADD CONSTRAINT fk_OPT_USERS__2 FOREIGN KEY (
      LOADING_OID
    )
    REFERENCES OPT_PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPT_USERS
    ADD CONSTRAINT fk_OPT_USERS__3 FOREIGN KEY (
      DISCHARGE_OID
    )
    REFERENCES OPT_PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- KNB_READ_DATA_HEADER  SCM連携データ
-----------------------------------------------------------------------------
--DROP TABLE KNB_READ_DATA_HEADER CASCADE;


CREATE TABLE KNB_READ_DATA_HEADER
(
    OID int8 NOT NULL,
    KANBAN_READ_DATA_TYPE varchar (4) NOT NULL,
    AA_SENDER_ID varchar (35),
    AA_INTERCHANGE_DATE_TIME varchar (19),
    AA_BODID varchar (14),
    AA_RECEIVER_ID varchar (35),
    AA_MESSAGE_ID varchar (128),
    AA_MESSAGE_DIRECTION varchar (1),
    EDI_MESSAGE_SENT char default 'N' NOT NULL,
    EDI_MESSAGE_ACK_RECEIVED char default 'N' NOT NULL,
    DOCUMENT_DATE_TIME varchar (35),
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_KNB_READ_DATA_HEADER_MESSAGE_ID ON KNB_READ_DATA_HEADER (AA_MESSAGE_ID);

COMMENT ON TABLE KNB_READ_DATA_HEADER IS 'かんばん読取情報ヘッダー';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.OID IS 'OID';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.KANBAN_READ_DATA_TYPE IS 'かんばん読取データ種別';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.AA_SENDER_ID IS '送受信情報 送信者';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.AA_INTERCHANGE_DATE_TIME IS '送受信情報 送信日時刻';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.AA_BODID IS '送受信情報 処理番号';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.AA_RECEIVER_ID IS '送受信情報 受信者';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.AA_MESSAGE_ID IS '送受信情報 メッセージID';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.AA_MESSAGE_DIRECTION IS '送受信情報 メッセージ送受信方向';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.EDI_MESSAGE_SENT IS 'EDIメッセージ送信済';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.EDI_MESSAGE_ACK_RECEIVED IS 'EDIメッセージACK受信済';
COMMENT ON COLUMN KNB_READ_DATA_HEADER.DOCUMENT_DATE_TIME IS '発行日';

ALTER TABLE IF EXISTS public.KNB_READ_DATA_HEADER
    OWNER to ediuser;


-----------------------------------------------------------------------------
-- KNB_READ_DATA_TRANSACTION
-----------------------------------------------------------------------------
--DROP TABLE KNB_READ_DATA_TRANSACTION CASCADE;


CREATE TABLE KNB_READ_DATA_TRANSACTION
(
      -- REFERENCES CHAIN_DATA (OID)
    OID int8 NOT NULL,
    KANBAN_READ_DATA_TYPE varchar (4) NOT NULL,
      -- REFERENCES KNB_READ_DATA_HEADER (OID)
    HEADER_OID int8 NOT NULL,
    PARTY_ID_SENDER varchar (35) NOT NULL,
    PLACE_ID_SENDER varchar (35) NOT NULL,
    PARTY_ID_RECEIVER varchar (35) NOT NULL,
    PLACE_ID_RECEIVER varchar (35) NOT NULL,
    PARTY_ID_OB varchar (35),
    PLACE_ID_OB varchar (35),
    PARTY_ID_ST varchar (35),
    PLACE_ID_ST varchar (35),
    PARTY_ID_SF varchar (35),
    PLACE_ID_SF varchar (35),
    PLACE_OF_LOADING_ID varchar (35),
    PLACE_OF_DISCHARGE_ID varchar (35),
    ITEM_ID_PD varchar (256),
    ITEM_A02 varchar (256),
    ITEM_A04_DESC varchar (256),
    ITEM_P08 varchar (514),
    ITEM_67 varchar (256),
    ITEM_E04 varchar (256),
    ITEM_P05_A4 varchar (256),
    PER_PACKAGE_QUANTITY varchar (256),
    DOC_REF_ID_AAU varchar (70),
    DELIVERY_DATE varchar (35),
    DELIVERY_NUMBER varchar (70),
    PICKUP_DATE_STRING_DATE varchar (8) NOT NULL,
    PICKUP_NUMBER varchar (70) NOT NULL,
    DATE_TIME_PERIOD_257 varchar (35),
    KANBAN_QR_DATA varchar (2048),
    PRIMARY KEY (OID)
);
CREATE INDEX IDXF_KNB_READ_DATA_HEADER ON KNB_READ_DATA_TRANSACTION (HEADER_OID);
CREATE INDEX IDX_KNB_READ_DATA_TRANSACTION ON KNB_READ_DATA_TRANSACTION (PARTY_ID_SENDER, PLACE_ID_SENDER, PARTY_ID_RECEIVER, PLACE_ID_RECEIVER, PICKUP_DATE_STRING_DATE, PICKUP_NUMBER);

COMMENT ON TABLE KNB_READ_DATA_TRANSACTION IS 'かんばん読取情報';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.OID IS 'OID';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.KANBAN_READ_DATA_TYPE IS 'かんばん読取データ種別';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.HEADER_OID IS 'ヘッダーOID';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PARTY_ID_SENDER IS '送信者企業';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PLACE_ID_SENDER IS '送信者事業所';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PARTY_ID_RECEIVER IS '受信者企業';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PLACE_ID_RECEIVER IS '受信者事業所';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PARTY_ID_OB IS '発注元';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PLACE_ID_OB IS '発注元事業所';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PARTY_ID_ST IS '納入先';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PLACE_ID_ST IS '納入先工区';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PARTY_ID_SF IS '出荷元';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PLACE_ID_SF IS '出荷元工区';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PLACE_OF_LOADING_ID IS '出荷場所';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PLACE_OF_DISCHARGE_ID IS '納入場所';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.ITEM_ID_PD IS '表示用品番';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.ITEM_A02 IS '適用業務区分';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.ITEM_A04_DESC IS '定期／不定期区分';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.ITEM_P08 IS '枝番';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.ITEM_67 IS '打切区分';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.ITEM_E04 IS '背番号';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.ITEM_P05_A4 IS 'QRフリー項目';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PER_PACKAGE_QUANTITY IS '収容数';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.DOC_REF_ID_AAU IS '納品書番号';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.DELIVERY_DATE IS '納入指示日';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.DELIVERY_NUMBER IS '納入指示便';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PICKUP_DATE_STRING_DATE IS '取り引き日 固定長日付';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.PICKUP_NUMBER IS '取り引き便';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.DATE_TIME_PERIOD_257 IS '処理日';
COMMENT ON COLUMN KNB_READ_DATA_TRANSACTION.KANBAN_QR_DATA IS 'かんばんQR情報';

ALTER TABLE IF EXISTS public.KNB_READ_DATA_TRANSACTION
    OWNER to ediuser;

ALTER TABLE KNB_READ_DATA_TRANSACTION
    ADD CONSTRAINT fk_KNB_READ_DATA_TRANSACTION__2 FOREIGN KEY (
      HEADER_OID
    )
    REFERENCES KNB_READ_DATA_HEADER (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- ここからオプション用テーブル
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- OPTION_SORT_CONFIG
--   ユーザに紐づかせるため企業コード、工区コードは不要とする
-----------------------------------------------------------------------------
--DROP TABLE OPTION_SORT_CONFIG CASCADE;


CREATE TABLE OPTION_SORT_CONFIG
(
    OID int8 NOT NULL,
      -- REFERENCES USERS (OID)
    USERS_OID int8 NOT NULL,
    PAGE_ID varchar (256) NOT NULL,
    VIEW_TAB_TYPE varchar (2),
    PARAMETER varchar (1024),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_SORT_CONFIG_1 UNIQUE (USERS_OID, PAGE_ID, VIEW_TAB_TYPE)
);
CREATE INDEX IDX_OPTION_SORT_CONFIG_USERS_PAGE ON OPTION_SORT_CONFIG (USERS_OID, PAGE_ID);

COMMENT ON TABLE OPTION_SORT_CONFIG IS '並び替え設定';
COMMENT ON COLUMN OPTION_SORT_CONFIG.OID IS 'OID';
COMMENT ON COLUMN OPTION_SORT_CONFIG.USERS_OID IS 'ユーザーOID';
COMMENT ON COLUMN OPTION_SORT_CONFIG.PAGE_ID IS '画面識別';
COMMENT ON COLUMN OPTION_SORT_CONFIG.VIEW_TAB_TYPE IS '表示タブ種類';
COMMENT ON COLUMN OPTION_SORT_CONFIG.PARAMETER IS 'パラメータ';
COMMENT ON COLUMN OPTION_SORT_CONFIG.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_SORT_CONFIG.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_SORT_CONFIG.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_SORT_CONFIG.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_SORT_CONFIG.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_SORT_CONFIG.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_SORT_CONFIG
    OWNER to ediuser;

ALTER TABLE OPTION_SORT_CONFIG
    ADD CONSTRAINT fk_OPTION_SORT_CONFIG__1 FOREIGN KEY (
      USERS_OID
    )
    REFERENCES USERS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_THREAD_MANAGER
-----------------------------------------------------------------------------
--DROP TABLE OPTION_THREAD_MANAGER CASCADE;


CREATE TABLE OPTION_THREAD_MANAGER
(
    ID varchar (30) NOT NULL,
    THREAD_STATUS varchar (30) NOT NULL,
    THREAD_CATEGORY varchar (40) NOT NULL,
      -- REFERENCES USERS (OID)
    USERS_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    USER_PLACE_OID int8 NOT NULL,
    START_UP_TIME timestamp,
    CLOSE_OUT_TIME timestamp,
    PARTY_OID int8,
    PLACE_OID int8,
    DATA_NUMBER integer,
    DATA_SIZE integer,
    DATA_SIZE2 integer,
    ERROR_MESSAGE text,
    MEMO text,
    MEMO2 text,
    PRIMARY KEY (ID)
);
CREATE INDEX IDXF_OPTION_THREAD_MANAGER_USERS ON OPTION_THREAD_MANAGER (USERS_OID);
CREATE INDEX IDXF_OPTION_THREAD_MANAGER_PLACE ON OPTION_THREAD_MANAGER (USER_PLACE_OID);

COMMENT ON TABLE OPTION_THREAD_MANAGER IS 'スレッド管理';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.ID IS 'スレッドID';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.THREAD_STATUS IS 'スレッドステータス';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.THREAD_CATEGORY IS 'スレッドカテゴリー(ロック管理のID)';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.USERS_OID IS '実行ユーザーOID';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.USER_PLACE_OID IS '実行事業所OID';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.START_UP_TIME IS '開始日時';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.CLOSE_OUT_TIME IS '終了日時';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.PARTY_OID IS '対象企業OID';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.PLACE_OID IS '対象事業所OID';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.DATA_NUMBER IS 'データ番号';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.DATA_SIZE IS 'データ件数';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.DATA_SIZE2 IS 'データ件数2';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.ERROR_MESSAGE IS 'メッセージ';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.MEMO IS '備考';
COMMENT ON COLUMN OPTION_THREAD_MANAGER.MEMO2 IS '備考2';

ALTER TABLE IF EXISTS public.OPTION_THREAD_MANAGER
    OWNER to ediuser;

ALTER TABLE OPTION_THREAD_MANAGER
    ADD CONSTRAINT fk_OPTION_THREAD_MANAGER__1 FOREIGN KEY (
      USERS_OID
    )
    REFERENCES USERS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_THREAD_MANAGER
    ADD CONSTRAINT fk_OPTION_THREAD_MANAGER__2 FOREIGN KEY (
      USER_PLACE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_LOCK_MANAGER
-----------------------------------------------------------------------------
--DROP TABLE OPTION_LOCK_MANAGER CASCADE;


CREATE TABLE OPTION_LOCK_MANAGER
(
    OID int8 NOT NULL,
    THREAD_ID varchar (40) NOT NULL,
      -- REFERENCES USERS (OID)
    USERS_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_OID int8 NOT NULL,
    LOCK_STATUS char NOT NULL,
    THREAD_CLASS varchar (256),
    THREAD_NUM integer,
    START_UP_TIME timestamp,
    CLOSE_OUT_TIME timestamp,
    MEMO varchar (128),
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_LOCK_MANAGER_1 UNIQUE (THREAD_ID, PLACE_OID)
);
CREATE INDEX IDXF_OPTION_LOCK_MANAGER_PLACE ON OPTION_LOCK_MANAGER (PLACE_OID);
CREATE INDEX IDXF_OPTION_LOCK_MANAGER_USERS ON OPTION_LOCK_MANAGER (USERS_OID);

COMMENT ON TABLE OPTION_LOCK_MANAGER IS 'ロック管理';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.OID IS 'OID';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.THREAD_ID IS 'スレッドID';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.USERS_OID IS '実行ユーザーOID';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.PLACE_OID IS '実行事業所OID';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.LOCK_STATUS IS 'ロック状態';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.THREAD_CLASS IS 'スレッドクラス名';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.THREAD_NUM IS 'スレッド数';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.START_UP_TIME IS '開始日時';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.CLOSE_OUT_TIME IS '終了日時';
COMMENT ON COLUMN OPTION_LOCK_MANAGER.MEMO IS '備考';

ALTER TABLE IF EXISTS public.OPTION_LOCK_MANAGER
    OWNER to ediuser;

ALTER TABLE OPTION_LOCK_MANAGER
    ADD CONSTRAINT fk_OPTION_LOCK_MANAGER__1 FOREIGN KEY (
      PLACE_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_LOCK_MANAGER
    ADD CONSTRAINT fk_OPTION_LOCK_MANAGER__2 FOREIGN KEY (
      USERS_OID
    )
    REFERENCES USERS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_SLIP_NO_MANAGER
-----------------------------------------------------------------------------
--DROP TABLE OPTION_SLIP_NO_MANAGER CASCADE;


CREATE TABLE OPTION_SLIP_NO_MANAGER
(
    OID int8 NOT NULL,
    MANAGER_TYPE varchar (2) NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
    SLIP_NO_01 int8 NOT NULL,
    SLIP_NO_02 int8,
        TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_SLIP_NO_MANAGER_1 UNIQUE (MANAGER_TYPE, PLACE_ST_OID)
);

COMMENT ON TABLE OPTION_SLIP_NO_MANAGER IS 'オプション用の納品書番号管理';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.OID IS 'OID';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.MANAGER_TYPE IS '管理種別';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.PLACE_ST_OID IS '納入先事業所工区OID';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.SLIP_NO_01 IS '納品書番号(アルファベット)';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.SLIP_NO_02 IS '納品書番号(数値)';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_SLIP_NO_MANAGER.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_SLIP_NO_MANAGER
    OWNER to ediuser;

ALTER TABLE OPTION_SLIP_NO_MANAGER
    ADD CONSTRAINT fk_OPTION_SLIP_NO_MANAGER__1 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_ADJUST
--   受入品番マスタに紐づくので企業コード、工区コードは不要とする
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_ADJUST CASCADE;


CREATE TABLE OPTION_KANBAN_ADJUST
(
    OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
        PLAN_DATE_STRING_DATE varchar (8) NOT NULL,
        START_DELIVERY_DATE_STRING_DATE varchar (8),
    START_SHIPMENT_NO integer,
    ADJUST_STATUS integer NOT NULL,
    ADJUST_TYPE integer NOT NULL,
    QUANTITY int8,
    PAR_QUANTITY decimal (6,2),
    TOTAL_QUANTITY int8,
    CARRY_FORWARD_FRACTION_QUANTITY decimal (3,2),
        TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_KANBAN_ADJUST_1 UNIQUE (ITEM_PART_OID, PLAN_DATE_STRING_DATE)
);

COMMENT ON TABLE OPTION_KANBAN_ADJUST IS 'かんばん増減情報';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.OID IS 'OID';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.PLAN_DATE_STRING_DATE IS '計画日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.START_DELIVERY_DATE_STRING_DATE IS '増減開始納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.START_SHIPMENT_NO IS '増減開始納入指示便';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.ADJUST_STATUS IS '増減状況';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.ADJUST_TYPE IS '増減区分';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.QUANTITY IS '増減枚数';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.PAR_QUANTITY IS '便当増減枚数';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.TOTAL_QUANTITY IS '増減累計枚数';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.CARRY_FORWARD_FRACTION_QUANTITY IS '増減繰越端数';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_ADJUST.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_ADJUST
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_ADJUST
    ADD CONSTRAINT fk_OPTION_KANBAN_ADJUST__1 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_ORDER_STOP
--   受入品番マスタに紐づくので企業コード、工区コードは不要とする
-----------------------------------------------------------------------------
--DROP TABLE OPTION_ORDER_STOP CASCADE;


CREATE TABLE OPTION_ORDER_STOP
(
    OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
    ORDER_STOP_ID varchar (8),
    ORDER_STOP_STATUS integer NOT NULL,
    START_DELIVERY_DATE_STRING_DATE varchar (8),
    START_SHIPMENT_NO integer,
    QUANTITY int8,
    TOTAL_QUANTITY int8,
    REMAINDER_QUANTITY int8,
    FRACTION_QUANTITY int8,
    LAST_START_DELIVERY_DATE_STRING_DATE varchar (8),
    LAST_START_SHIPMENT_NO integer,
    LAST_SLIP_NO varchar (70),
    LAST_DELIVERY_QUANTITY int8,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_ORDER_STOP_1 UNIQUE (ITEM_PART_OID)
);

COMMENT ON TABLE OPTION_ORDER_STOP IS '打切情報';
COMMENT ON COLUMN OPTION_ORDER_STOP.OID IS 'OID';
COMMENT ON COLUMN OPTION_ORDER_STOP.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_ORDER_STOP.ORDER_STOP_ID IS '打切ID';
COMMENT ON COLUMN OPTION_ORDER_STOP.ORDER_STOP_STATUS IS '打切状況';
COMMENT ON COLUMN OPTION_ORDER_STOP.START_DELIVERY_DATE_STRING_DATE IS '打切開始納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_ORDER_STOP.START_SHIPMENT_NO IS '打切開始納入指示便';
COMMENT ON COLUMN OPTION_ORDER_STOP.QUANTITY IS '打切数量';
COMMENT ON COLUMN OPTION_ORDER_STOP.TOTAL_QUANTITY IS '打切累計';
COMMENT ON COLUMN OPTION_ORDER_STOP.REMAINDER_QUANTITY IS '打切残数';
COMMENT ON COLUMN OPTION_ORDER_STOP.FRACTION_QUANTITY IS '打切端数';
COMMENT ON COLUMN OPTION_ORDER_STOP.LAST_START_DELIVERY_DATE_STRING_DATE IS '最終打切開始納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_ORDER_STOP.LAST_START_SHIPMENT_NO IS '最終打切開始納入指示便';
COMMENT ON COLUMN OPTION_ORDER_STOP.LAST_SLIP_NO IS '最終打切納品書番号';
COMMENT ON COLUMN OPTION_ORDER_STOP.LAST_DELIVERY_QUANTITY IS '最終打切納入指示数';
COMMENT ON COLUMN OPTION_ORDER_STOP.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_ORDER_STOP.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_ORDER_STOP.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_ORDER_STOP.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_ORDER_STOP.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_ORDER_STOP.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_ORDER_STOP
    OWNER to ediuser;

ALTER TABLE OPTION_ORDER_STOP
    ADD CONSTRAINT fk_OPTION_ORDER_STOP__1 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_SHIPMENT
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_SHIPMENT CASCADE;


CREATE TABLE OPTION_SHIPMENT
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
    TABLE_NO integer NOT NULL,
    MEMO varchar (80),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_SHIPMENT_1 UNIQUE (TABLE_NO, PLACE_ST_OID)
);

COMMENT ON TABLE OPTION_SHIPMENT IS '納入指示テーブル(親)';
COMMENT ON COLUMN OPTION_SHIPMENT.OID IS 'OID';
COMMENT ON COLUMN OPTION_SHIPMENT.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_SHIPMENT.TABLE_NO IS 'テーブルNo';
COMMENT ON COLUMN OPTION_SHIPMENT.MEMO IS '備考コメント';
COMMENT ON COLUMN OPTION_SHIPMENT.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_SHIPMENT.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_SHIPMENT.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_SHIPMENT.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_SHIPMENT.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_SHIPMENT.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_SHIPMENT
    OWNER to ediuser;

ALTER TABLE OPTION_SHIPMENT
    ADD CONSTRAINT fk_OPTION_SHIPMENT__1 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_SHIPMENT_SETTING
--   親テーブルに紐づく
-----------------------------------------------------------------------------
--DROP TABLE OPTION_SHIPMENT_SETTING CASCADE;


CREATE TABLE OPTION_SHIPMENT_SETTING
(
    OID int8 NOT NULL,
      -- REFERENCES OPTION_SHIPMENT (OID)
    OPTION_SHIPMENT_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_SF_OID int8 NOT NULL,
    PROCESSING_NO integer NOT NULL,
    PROCESSING_DATE_TYPE integer NOT NULL,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_SHIPMENT_SETTING_1 UNIQUE (OPTION_SHIPMENT_OID, PLACE_SF_OID)
);

COMMENT ON TABLE OPTION_SHIPMENT_SETTING IS '納入指示テーブル(子)';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.OID IS 'OID';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.OPTION_SHIPMENT_OID IS '納入指示テーブル(親)OID';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.PLACE_SF_OID IS '出荷元事業所情報OID';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.PROCESSING_NO IS '処理便';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.PROCESSING_DATE_TYPE IS '処理日種別';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_SHIPMENT_SETTING.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_SHIPMENT_SETTING
    OWNER to ediuser;

ALTER TABLE OPTION_SHIPMENT_SETTING
    ADD CONSTRAINT fk_OPTION_SHIPMENT_SETTING__1 FOREIGN KEY (
      OPTION_SHIPMENT_OID
    )
    REFERENCES OPTION_SHIPMENT (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_SHIPMENT_SETTING
    ADD CONSTRAINT fk_OPTION_SHIPMENT_SETTING__2 FOREIGN KEY (
      PLACE_SF_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_CALENDAR
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_CALENDAR CASCADE;


CREATE TABLE OPTION_CALENDAR
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
    CALENDAR_NO integer NOT NULL,
    MEMO varchar (40),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_CALENDAR_1 UNIQUE (CALENDAR_NO, PLACE_ST_OID)
);

COMMENT ON TABLE OPTION_CALENDAR IS 'カレンダーマスタ（親）';
COMMENT ON COLUMN OPTION_CALENDAR.OID IS 'OID';
COMMENT ON COLUMN OPTION_CALENDAR.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_CALENDAR.CALENDAR_NO IS 'カレンダーNo';
COMMENT ON COLUMN OPTION_CALENDAR.MEMO IS '備考コメント';
COMMENT ON COLUMN OPTION_CALENDAR.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_CALENDAR.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_CALENDAR.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_CALENDAR.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_CALENDAR.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_CALENDAR.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_CALENDAR
    OWNER to ediuser;

ALTER TABLE OPTION_CALENDAR
    ADD CONSTRAINT fk_OPTION_CALENDAR__1 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_CALENDAR_SETTING
--   親テーブルに紐づく
-----------------------------------------------------------------------------
--DROP TABLE OPTION_CALENDAR_SETTING CASCADE;


CREATE TABLE OPTION_CALENDAR_SETTING
(
    OID int8 NOT NULL,
      -- REFERENCES OPTION_CALENDAR (OID)
    OPTION_CALENDAR_OID int8 NOT NULL,
    DATE date NOT NULL,
    OPERATING_INFO integer NOT NULL,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_CALENDAR_SETTING_1 UNIQUE (OPTION_CALENDAR_OID, DATE)
);

COMMENT ON TABLE OPTION_CALENDAR_SETTING IS 'カレンダーマスタ（子）';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.OID IS 'OID';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.OPTION_CALENDAR_OID IS 'カレンダマスタ(親)OID';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.DATE IS '日付';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.OPERATING_INFO IS '稼動情報';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_CALENDAR_SETTING.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_CALENDAR_SETTING
    OWNER to ediuser;

ALTER TABLE OPTION_CALENDAR_SETTING
    ADD CONSTRAINT fk_OPTION_CALENDAR_SETTING__1 FOREIGN KEY (
      OPTION_CALENDAR_OID
    )
    REFERENCES OPTION_CALENDAR (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_BRANCH
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_BRANCH CASCADE;


CREATE TABLE OPTION_KANBAN_BRANCH
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
    DELIVERY_DATE_STRING_DATE varchar (8),
    SHIPMENT_NO integer,
    ITEM_A04_DESC varchar (256),
    DOC_REF_ID_AAU varchar (70),
    BRANCH_NO int8,
    BRANCH_STATUS integer NOT NULL,
    READ_DATE_TIME timestamp,
    READ_COUNT integer,
    PROCESSING_DATE_TIME timestamp,
    PROCESSING_SHIPMENT_NO integer,
    PRINT_TYPE integer NOT NULL,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_OPTION_KANBAN_BRANCH_ITEM ON OPTION_KANBAN_BRANCH (ITEM_PART_OID);

COMMENT ON TABLE OPTION_KANBAN_BRANCH IS 'かんばん枝番情報';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.OID IS 'OID';
COMMENT ON COLUMN OPTION_CALENDAR.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.DELIVERY_DATE_STRING_DATE IS '納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.SHIPMENT_NO IS '納入指示便';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.ITEM_A04_DESC IS '定期／不定期区分';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.DOC_REF_ID_AAU IS '納品書番号';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.BRANCH_NO IS '枝番';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.BRANCH_STATUS IS '枝番状況';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.READ_DATE_TIME IS '読取日・時間';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.READ_COUNT IS '読取回';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.PROCESSING_DATE_TIME IS '処理日・時間';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.PROCESSING_SHIPMENT_NO IS '処理便';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.PRINT_TYPE IS '発行区分';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_BRANCH
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_BRANCH
    ADD CONSTRAINT fk_OPTION_KANBAN_BRANCH__1 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;

ALTER TABLE OPTION_KANBAN_BRANCH
    ADD CONSTRAINT fk_OPTION_KANBAN_BRANCH__2 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_BRANCH_PERMANENT
--   親テーブルに紐づく
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_BRANCH_PERMANENT CASCADE;


CREATE TABLE OPTION_KANBAN_BRANCH_PERMANENT
(
      -- REFERENCES OPTION_KANBAN_BRANCH (OID)
    OID int8 NOT NULL,
    PRIMARY KEY (OID)
);

COMMENT ON TABLE OPTION_KANBAN_BRANCH_PERMANENT IS 'かんばん枝番情報（永続情報）';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH_PERMANENT.OID IS 'OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_BRANCH_PERMANENT
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_BRANCH_PERMANENT
    ADD CONSTRAINT fk_OPTION_KANBAN_BRANCH_PERMANENT__1 FOREIGN KEY (
      OID
    )
    REFERENCES OPTION_KANBAN_BRANCH (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_BRANCH_TEMPORARY
--   親テーブルに紐づく
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_BRANCH_TEMPORARY CASCADE;


CREATE TABLE OPTION_KANBAN_BRANCH_TEMPORARY
(
      -- REFERENCES OPTION_KANBAN_BRANCH (OID)
    OID int8 NOT NULL,
    PRIMARY KEY (OID)
);

COMMENT ON TABLE OPTION_KANBAN_BRANCH_TEMPORARY IS 'かんばん枝番情報（一時情報）';
COMMENT ON COLUMN OPTION_KANBAN_BRANCH_TEMPORARY.OID IS 'OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_BRANCH_TEMPORARY
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_BRANCH_TEMPORARY
    ADD CONSTRAINT fk_OPTION_KANBAN_BRANCH_TEMPORARY__1 FOREIGN KEY (
      OID
    )
    REFERENCES OPTION_KANBAN_BRANCH (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_DELIVERY_HISTORY
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_DELIVERY_HISTORY CASCADE;


CREATE TABLE OPTION_KANBAN_DELIVERY_HISTORY
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
    DELIVERY_DATE_STRING_DATE varchar (8),
    SHIPMENT_NO integer,
    DELIVERY_PROCESSING_DATE_STRING_DATE varchar (8),
    PROCESSING_DATE_TIME timestamp,
    PROCESSING_SHIPMENT_NO integer,
    ITEM_A04_DESC varchar (256),
    DOC_REF_ID_AAU varchar (70),
    DELIVERY_BOX integer,
    DELIVERY_QUANTITY integer,
    ROLL_QUANTITY integer,
    READ_QUANTITY integer,
    ADJUST_QUANTITY integer,
    ORDER_STOP_QUANTITY integer,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_OPTION_KANBAN_DELIVERY_HISTORY_ITEM_DELIVERY ON OPTION_KANBAN_DELIVERY_HISTORY (ITEM_PART_OID);

COMMENT ON TABLE OPTION_KANBAN_DELIVERY_HISTORY IS 'かんばん納入指示履歴';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.OID IS 'OID';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.DELIVERY_DATE_STRING_DATE IS '納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.SHIPMENT_NO IS '納入指示便';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.DELIVERY_PROCESSING_DATE_STRING_DATE IS '納入指示処理日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.PROCESSING_DATE_TIME IS '処理日・時間';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.PROCESSING_SHIPMENT_NO IS '処理便';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.ITEM_A04_DESC IS '定期／不定期区分';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.DOC_REF_ID_AAU IS '納品書番号';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.DELIVERY_BOX IS '納入指示箱数';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.DELIVERY_QUANTITY IS '納入指示数量';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.ROLL_QUANTITY IS '回転枚数';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.READ_QUANTITY IS '読取枚数';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.ADJUST_QUANTITY IS '増減枚数';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.ORDER_STOP_QUANTITY IS '打切枚数';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_DELIVERY_HISTORY.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_DELIVERY_HISTORY
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_DELIVERY_HISTORY
    ADD CONSTRAINT fk_OPTION_KANBAN_DELIVERY_HISTORY__1 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;

ALTER TABLE OPTION_KANBAN_DELIVERY_HISTORY
    ADD CONSTRAINT fk_OPTION_KANBAN_DELIVERY_HISTORY__2 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_CYCLE
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_CYCLE CASCADE;


CREATE TABLE OPTION_KANBAN_CYCLE
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_SF_OID int8 NOT NULL,
    CYCLE_A integer NOT NULL,
    CYCLE_B integer NOT NULL,
    CYCLE_C integer NOT NULL,
    CYCLE_D integer NOT NULL,
      -- REFERENCES OPTION_CALENDAR (OID)
    OPTION_CALENDAR_OID int8 NOT NULL,
    LAST_PROCESSING_DATE timestamp,
    LAST_PROCESSING_NO integer,
    LAST_DELIVERY_DATE_STRING_DATE varchar (8),
    LAST_SHIPMENT_NO integer,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_KANBAN_CYCLE_1 UNIQUE (PLACE_ST_OID, PLACE_SF_OID)
);

COMMENT ON TABLE OPTION_KANBAN_CYCLE IS 'かんばんサイクル情報';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.OID IS 'OID';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.PLACE_SF_OID IS '出荷元事業所情報OID';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.CYCLE_A IS 'サイクルA';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.CYCLE_B IS 'サイクルB';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.CYCLE_C IS 'サイクルC';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.CYCLE_D IS 'サイクルD';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.OPTION_CALENDAR_OID IS 'カレンダマスタ(親)OID';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.LAST_PROCESSING_DATE IS '前回処理日';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.LAST_PROCESSING_NO IS '前回処理便';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.LAST_DELIVERY_DATE_STRING_DATE IS '前回納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.LAST_SHIPMENT_NO IS '前回納入指示便';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_CYCLE.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_CYCLE
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_CYCLE
    ADD CONSTRAINT fk_OPTION_KANBAN_CYCLE__1 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_KANBAN_CYCLE
    ADD CONSTRAINT fk_OPTION_KANBAN_CYCLE__2 FOREIGN KEY (
      PLACE_SF_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_KANBAN_CYCLE
    ADD CONSTRAINT fk_OPTION_KANBAN_CYCLE__3 FOREIGN KEY (
      OPTION_CALENDAR_OID
    )
    REFERENCES OPTION_CALENDAR (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_READ_HISTORY
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_READ_HISTORY CASCADE;


CREATE TABLE OPTION_KANBAN_READ_HISTORY
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
    TERMINAL_NO integer,
    READ_DATE_STRING_DATE varchar (8),
    READ_COUNT integer,
    READ_START_TIME timestamp,
    READ_END_TIME timestamp,
    READ_SPEND_TIME integer,
    UPDATE_START_TIME timestamp,
    UPDATE_END_TIME timestamp,
    UPDATE_SPEND_TIME integer,
    TOTAL_QUANTITY int8,
    READ_ERROR_QUANTITY int8,
    DATA_ERROR_QUANTITY int8,
    READ_ERROR_RATIO decimal (4,1),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);

COMMENT ON TABLE OPTION_KANBAN_READ_HISTORY IS 'かんばん読取履歴（親）';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.OID IS 'OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TERMINAL_NO IS '端末番号';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.READ_DATE_STRING_DATE IS '読取日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.READ_COUNT IS '読取回';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.READ_START_TIME IS '読取開始日・時間';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.READ_END_TIME IS '読取終了日・時間';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.READ_SPEND_TIME IS '読取処理時間';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.UPDATE_START_TIME IS 'データ更新開始日・時間';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.UPDATE_END_TIME IS 'データ更新終了日・時間';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.UPDATE_SPEND_TIME IS 'データ更新処理時間';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TOTAL_QUANTITY IS '読取総枚数';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.READ_ERROR_QUANTITY IS '読取エラー枚数 ';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.DATA_ERROR_QUANTITY IS 'データエラー枚数 ';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.READ_ERROR_RATIO IS 'リーダーエラー率';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_READ_HISTORY
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_READ_HISTORY
    ADD CONSTRAINT fk_OPTION_KANBAN_READ_HISTORY__1 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES PLACE (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_READ_HISTORY_SETTING
--   親テーブルに紐づく
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_READ_HISTORY_SETTING CASCADE;


CREATE TABLE OPTION_KANBAN_READ_HISTORY_SETTING
(
    OID int8 NOT NULL,
      -- REFERENCES OPTION_KANBAN_READ_HISTORY (OID)
    KANAN_READ_HISTORY_OID int8 NOT NULL,
    DELIVERY_DATE_STRING_DATE varchar (8),
    SHIPMENT_NO integer,
    DOC_REF_ID_AAU varchar (70),
    PARTY_ID_ST varchar (35),
    PLACE_ID_ST varchar (35),
    PLACE_OF_DISCHARGE_ID varchar (35),
    PARTY_ID_SF varchar (35),
    PLACE_ID_SF varchar (35),
    ITEM_ID_PD varchar (256),
    ITEM_E18 varchar (256),
    BRANCH_NO int8,
    READ_STATUS integer NOT NULL,
    READ_DATE_TIME timestamp,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_KANAN_READ_HISTORY_OID ON OPTION_KANBAN_READ_HISTORY_SETTING (KANAN_READ_HISTORY_OID);

COMMENT ON TABLE OPTION_KANBAN_READ_HISTORY_SETTING IS 'かんばん読取履歴（子）';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.OID IS 'OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.KANAN_READ_HISTORY_OID IS 'かんばん読取履歴OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.DELIVERY_DATE_STRING_DATE IS '納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.SHIPMENT_NO IS '納入指示便';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.DOC_REF_ID_AAU IS '納品書番号';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.PARTY_ID_ST IS '納入先';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.PLACE_ID_ST IS '納入先工区';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.PLACE_OF_DISCHARGE_ID IS '納入場所';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.PARTY_ID_SF IS '出荷元';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.PLACE_ID_SF IS '出荷元工区';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.ITEM_ID_PD IS '表示用品番';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.ITEM_E18 IS '部品取扱識別';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.BRANCH_NO IS '枝番';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.READ_STATUS IS '読取状況';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.READ_DATE_TIME IS '読取日・時間';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_SETTING.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_READ_HISTORY_SETTING
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_READ_HISTORY_SETTING
    ADD CONSTRAINT fk_OPTION_KANBAN_READ_HISTORY_SETTING__1 FOREIGN KEY (
      KANAN_READ_HISTORY_OID
    )
    REFERENCES OPTION_KANBAN_READ_HISTORY (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_KANBAN_READ_HISTORY_ITEM
--   親テーブルに紐づく
-----------------------------------------------------------------------------
--DROP TABLE OPTION_KANBAN_READ_HISTORY_ITEM CASCADE;


CREATE TABLE OPTION_KANBAN_READ_HISTORY_ITEM
(
    OID int8 NOT NULL,
      -- REFERENCES OPTION_KANBAN_READ_HISTORY (OID)
    KANAN_READ_HISTORY_OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
    ROLL_QUANTITY integer,
    READ_QUANTITY integer,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_OPTION_KANBAN_READ_HISTORY_ITEM_HEAD ON OPTION_KANBAN_READ_HISTORY_ITEM (KANAN_READ_HISTORY_OID);
CREATE INDEX IDX_OPTION_KANBAN_READ_HISTORY_ITEM_ITEM ON OPTION_KANBAN_READ_HISTORY_ITEM (ITEM_PART_OID);

COMMENT ON TABLE OPTION_KANBAN_READ_HISTORY_ITEM IS 'かんばん読取履歴（品番）';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.OID IS 'OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.KANAN_READ_HISTORY_OID IS 'かんばん読取履歴OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.ROLL_QUANTITY IS '回転枚数';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.READ_QUANTITY IS '読取枚数';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_KANBAN_READ_HISTORY_ITEM.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_KANBAN_READ_HISTORY_ITEM
    OWNER to ediuser;

ALTER TABLE OPTION_KANBAN_READ_HISTORY_ITEM
    ADD CONSTRAINT fk_OPTION_KANBAN_READ_HISTORY_ITEM__1 FOREIGN KEY (
      KANAN_READ_HISTORY_OID
    )
    REFERENCES OPTION_KANBAN_READ_HISTORY (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_KANBAN_READ_HISTORY_ITEM
    ADD CONSTRAINT fk_OPTION_KANBAN_READ_HISTORY_ITEM__2 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_TRANSACTION_ITEM_MAPPER
--   親テーブルに紐づく(transport_transaction)
-----------------------------------------------------------------------------
--DROP TABLE OPTION_TRANSACTION_ITEM_MAPPER CASCADE;


CREATE TABLE OPTION_TRANSACTION_ITEM_MAPPER
(
    OID int8 NOT NULL,
      -- REFERENCES TRANSPORT_TRANSACTION (OID)
    TRANSACTION_OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_OID int8 NOT NULL,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_TRANSACTION_ITEM_MAPPER_1 UNIQUE (TRANSACTION_OID)
);

COMMENT ON TABLE OPTION_TRANSACTION_ITEM_MAPPER IS '輸送トランザクション-品番マッピング';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.OID IS 'OID';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.TRANSACTION_OID IS '輸送トランザクションOID';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.ITEM_OID IS '品番OID';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_TRANSACTION_ITEM_MAPPER.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_TRANSACTION_ITEM_MAPPER
    OWNER to ediuser;

ALTER TABLE OPTION_TRANSACTION_ITEM_MAPPER
    ADD CONSTRAINT fk_OPTION_TRANSACTION_ITEM_MAPPER__1 FOREIGN KEY (
      TRANSACTION_OID
    )
    REFERENCES TRANSPORT_TRANSACTION (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_TRANSACTION_ITEM_MAPPER
    ADD CONSTRAINT fk_OPTION_TRANSACTION_ITEM_MAPPER__2 FOREIGN KEY (
      ITEM_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_THREAD_PROCESS_MAPPER
--   親テーブルに紐づく(transaction_process)
-----------------------------------------------------------------------------
--DROP TABLE OPTION_THREAD_PROCESS_MAPPER CASCADE;


CREATE TABLE OPTION_THREAD_PROCESS_MAPPER
(
    OID int8 NOT NULL,
    THREAD_ID varchar (30) NOT NULL,
      -- REFERENCES TRANSPORT_PROCESS (OID)
    PROCESS_OID int8 NOT NULL,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID),
    CONSTRAINT unq_OPTION_THREAD_PROCESS_MAPPER_1 UNIQUE (THREAD_ID, PROCESS_OID)
);
CREATE INDEX IDXF_OPTION_THREAD_PROCESS_MAPPER_THREAD_ID ON OPTION_THREAD_PROCESS_MAPPER (THREAD_ID);

COMMENT ON TABLE OPTION_THREAD_PROCESS_MAPPER IS 'スレッド管理-輸送プロセスマッピング';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.OID IS 'OID';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.THREAD_ID IS 'スレッドID';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.PROCESS_OID IS '輸送プロセスOID';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_THREAD_PROCESS_MAPPER.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_THREAD_PROCESS_MAPPER
    OWNER to ediuser;

ALTER TABLE OPTION_THREAD_PROCESS_MAPPER
    ADD CONSTRAINT fk_OPTION_THREAD_PROCESS_MAPPER__1 FOREIGN KEY (
      PROCESS_OID
    )
    REFERENCES TRANSPORT_PROCESS (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_READ_ORDER_QUANTITY_MANAGER
--   かんばん納入指示Slim
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_READ_ORDER_QUANTITY_MANAGER CASCADE;


CREATE TABLE OPTION_READ_ORDER_QUANTITY_MANAGER
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
    ORDER_QUANTITY integer,
    READ_QUANTITY integer,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_OPTION_READ_ORDER_QUANTITY_MANAGER_ITEM ON OPTION_READ_ORDER_QUANTITY_MANAGER (ITEM_PART_OID);

COMMENT ON TABLE OPTION_READ_ORDER_QUANTITY_MANAGER IS '読取・発注枚数管理テーブル';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.OID IS 'OID';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.ORDER_QUANTITY IS '発注枚数';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.READ_QUANTITY IS '読取枚数';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_READ_ORDER_QUANTITY_MANAGER.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_READ_ORDER_QUANTITY_MANAGER
    OWNER to ediuser;

ALTER TABLE OPTION_READ_ORDER_QUANTITY_MANAGER
    ADD CONSTRAINT fk_OPTION_READ_ORDER_QUANTITY_MANAGER__1 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;

ALTER TABLE OPTION_READ_ORDER_QUANTITY_MANAGER
    ADD CONSTRAINT fk_OPTION_READ_ORDER_QUANTITY_MANAGER__2 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_ORDER_TARGET_MANAGER
--   かんばん納入指示Slim
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
DROP TABLE OPTION_ORDER_TARGET_MANAGER CASCADE;


CREATE TABLE OPTION_ORDER_TARGET_MANAGER
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
    ORDER_TARGET_TYPE integer,
    LAST_PROCESSING_DATE varchar,
    LAST_DELIVERY_DATE varchar,
    LAST_SHIPMENT_NO integer,
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_OPTION_ORDER_TARGET_MANAGER_ITEM ON OPTION_ORDER_TARGET_MANAGER (ITEM_PART_OID);

COMMENT ON TABLE OPTION_ORDER_TARGET_MANAGER IS '発注対象管理テーブル';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.OID IS 'OID';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.ORDER_TARGET_TYPE IS '発注対象区分';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.LAST_PROCESSING_DATE IS '最終処理日';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.LAST_DELIVERY_DATE IS '最終納入指示日';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.LAST_SHIPMENT_NO IS '最終納入指示便';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_ORDER_TARGET_MANAGER.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_ORDER_TARGET_MANAGER
    OWNER to ediuser;

ALTER TABLE OPTION_ORDER_TARGET_MANAGER
    ADD CONSTRAINT fk_OPTION_ORDER_TARGET_MANAGER__1 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;

ALTER TABLE OPTION_ORDER_TARGET_MANAGER
    ADD CONSTRAINT fk_OPTION_ORDER_TARGET_MANAGER__2 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


-----------------------------------------------------------------------------
-- OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY
--   納入先事業所OIDに紐づく　納入先事業所OIDに自工区のOIDを指定
-----------------------------------------------------------------------------
--DROP TABLE OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY CASCADE;


CREATE TABLE OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY
(
    OID int8 NOT NULL,
      -- REFERENCES PLACE (OID)
    PLACE_ST_OID int8 NOT NULL,
      -- REFERENCES ITEM (OID)
    ITEM_PART_OID int8 NOT NULL,
        DELIVERY_DATE_STRING_DATE varchar (8),
    SHIPMENT_NO integer,
    PROCESSING_DATE_TIME timestamp,
    PROCESSING_SHIPMENT_NO integer,
    DOC_REF_ID_AAU varchar (70),
    DELIVERY_BOX integer,
    DELIVERY_QUANTITY integer,
    THREAD_ID varchar (30),
    TS_REGISTERER_DATE timestamp NOT NULL,
    TS_REGISTERER_USER_ID int8,
    TS_REGISTERER_USER_PLACE_ID int8,
    TS_LAST_MODIFIED_DATE timestamp NOT NULL,
    TS_LAST_MODIFIED_USER_ID int8,
    TS_LAST_MODIFIED_USER_PLACE_ID int8,
    PRIMARY KEY (OID)
);
CREATE INDEX IDX_OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY_ITEM_DELIVERY ON OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY (ITEM_PART_OID);

COMMENT ON TABLE OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY IS '簡易かんばん納入指示履歴';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.OID IS 'OID';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.PLACE_ST_OID IS '納入先事業所情報OID';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.ITEM_PART_OID IS '受入品番マスタOID';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.DELIVERY_DATE_STRING_DATE IS '納入指示日 固定長日付';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.SHIPMENT_NO IS '納入指示便';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.PROCESSING_DATE_TIME IS '処理日・時間';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.PROCESSING_SHIPMENT_NO IS '処理便';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.DOC_REF_ID_AAU IS '納品書番号';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.DELIVERY_BOX IS '納入指示箱数';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.DELIVERY_QUANTITY IS '納入指示数量';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.THREAD_ID IS 'スレッドID';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.TS_REGISTERER_DATE IS '更新日時情報 登録日時';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.TS_REGISTERER_USER_ID IS '更新日時情報 登録ユーザーOID';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.TS_REGISTERER_USER_PLACE_ID IS '更新日時情報 登録ユーザー選択事業所OID';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.TS_LAST_MODIFIED_DATE IS '更新日時情報 最終更新日';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.TS_LAST_MODIFIED_USER_ID IS '更新日時情報 最終ユーザーOID';
COMMENT ON COLUMN OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY.TS_LAST_MODIFIED_USER_PLACE_ID IS '更新日時情報 最終ユーザー選択事業所OID';

ALTER TABLE IF EXISTS public.OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY
    OWNER to ediuser;

ALTER TABLE OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY
    ADD CONSTRAINT fk_OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY__1 FOREIGN KEY (
      ITEM_PART_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;
ALTER TABLE OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY
    ADD CONSTRAINT fk_OPTION_SIMPLE_KANBAN_DELIVERY_HISTORY__2 FOREIGN KEY (
      PLACE_ST_OID
    )
    REFERENCES ITEM (OID)
    ON UPDATE CASCADE
    ON DELETE CASCADE 
;


